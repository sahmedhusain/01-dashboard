import{r as v,j as e,m as c}from"./animation-vendor-CTGg7XC5.js";import{L as k,C as a,b as r,g as C}from"./index-B61jjRdg.js";import{g as d,p as P,A}from"./ui-vendor-EbFLDUo2.js";import{d as T,e as M}from"./apollo-vendor-Dxrk3Lr4.js";import"./react-vendor-Csw2ODfV.js";const Y=({user:f})=>{const[s,w]=v.useState("main"),{data:i,loading:b,error:x}=T(M`
    query GetCheckpointData {
      user {
        id
        login
        firstName
        lastName
        campus
        totalUp
        totalDown
        auditRatio
        createdAt
        updatedAt
      }
    }
  `,{variables:{userId:f.id},errorPolicy:"all"});if(b)return e.jsx(k,{});if(x)return e.jsx(a,{className:"p-6",children:e.jsxs("div",{className:"text-center text-red-400",children:[e.jsx("p",{children:"Error loading checkpoint data"}),e.jsx("p",{className:"text-sm text-white/60 mt-2",children:x.message})]})});const o=i?.mainCheckpoints||[],h=i?.goPiscineCheckpoints||[],l=i?.otherPiscineCheckpoints||[],m=i?.mainCheckpointAggregate?.aggregate,p=i?.goPiscineCheckpointAggregate?.aggregate,g=i?.otherPiscineCheckpointAggregate?.aggregate,n=[];o.length>0&&n.push("main"),h.length>0&&n.push("go"),l.length>0&&n.push("piscines");const j=(t=>{const N=new Set;return t.forEach(y=>{const u=y.path.match(/\/bahrain\/bh-module\/piscine-([^\/]+)\/checkpoint\//);u&&N.add(u[1])}),Array.from(N)})(l);return n.length===0?e.jsxs("div",{className:"space-y-8",children:[e.jsxs(c.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-center",children:[e.jsx("h1",{className:"text-4xl font-bold text-white mb-2",children:"Checkpoints Dashboard"}),e.jsx("p",{className:"text-white/70 text-lg",children:"Your checkpoint progress and achievements"})]}),e.jsx(a,{className:"p-8 text-center",children:e.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[e.jsx(d,{className:"w-16 h-16 text-white/30"}),e.jsx("h3",{className:"text-xl font-semibold text-white",children:"No Checkpoints Found"}),e.jsx("p",{className:"text-white/60",children:"You haven't completed any checkpoints yet. Checkpoints will appear here once you start completing them."})]})})]}):e.jsxs("div",{className:"space-y-8",children:[e.jsxs(c.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-center",children:[e.jsx("h1",{className:"text-4xl font-bold text-white mb-2",children:"Checkpoints Dashboard"}),e.jsx("p",{className:"text-white/70 text-lg",children:"Your checkpoint progress and achievements"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[o.length>0&&e.jsxs(a,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(P,{className:"w-6 h-6 text-primary-400 mr-3"}),e.jsx("h3",{className:"text-lg font-semibold text-white",children:"Main Module"})]}),e.jsx("span",{className:"text-2xl font-bold text-primary-400",children:m?.count||0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-white/60 text-sm",children:"Total XP"}),e.jsx("div",{className:"text-xl font-bold text-white",children:r(m?.sum?.amount||0)})]})]}),h.length>0&&e.jsxs(a,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(d,{className:"w-6 h-6 text-green-400 mr-3"}),e.jsx("h3",{className:"text-lg font-semibold text-white",children:"Go Piscine"})]}),e.jsx("span",{className:"text-2xl font-bold text-green-400",children:p?.count||0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-white/60 text-sm",children:"Total XP"}),e.jsx("div",{className:"text-xl font-bold text-white",children:r(p?.sum?.amount||0)})]})]}),l.length>0&&e.jsxs(a,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(A,{className:"w-6 h-6 text-yellow-400 mr-3"}),e.jsx("h3",{className:"text-lg font-semibold text-white",children:"Other Piscines"})]}),e.jsx("span",{className:"text-2xl font-bold text-yellow-400",children:g?.count||0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-white/60 text-sm",children:"Total XP"}),e.jsx("div",{className:"text-xl font-bold text-white",children:r(g?.sum?.amount||0)}),j.length>0&&e.jsxs("div",{className:"text-white/60 text-sm",children:["Types: ",j.join(", ")]})]})]})]}),e.jsx(c.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1},children:e.jsx("nav",{className:"bg-white/5 backdrop-blur-sm border border-white/10 rounded-lg p-2",children:e.jsx("div",{className:"flex space-x-2 overflow-x-auto scrollbar-hide",children:n.map(t=>e.jsxs(c.button,{onClick:()=>w(t),whileHover:{y:-2},whileTap:{y:0},className:`flex items-center px-4 py-3 text-sm font-medium rounded-lg transition-all whitespace-nowrap ${s===t?"bg-primary-500/20 text-primary-400 border border-primary-500/30":"text-white/70 hover:text-white hover:bg-white/10"}`,children:[e.jsx(d,{className:"w-4 h-4 mr-2"}),t==="main"?"Main Module":t==="go"?"Go Piscine":"Other Piscines"]},t))})})}),e.jsx(c.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:e.jsxs(a,{className:"p-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-white mb-6",children:s==="main"?"Main Module Checkpoints":s==="go"?"Go Piscine Checkpoints":"Other Piscine Checkpoints"}),e.jsx("div",{className:"space-y-4",children:(s==="main"?o:s==="go"?h:l).map(t=>e.jsx("div",{className:"bg-white/5 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-white",children:t.object?.name||"Checkpoint"}),e.jsx("p",{className:"text-white/60 text-sm",children:t.path})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-lg font-bold text-primary-400",children:r(t.amount)}),e.jsx("div",{className:"text-white/60 text-sm",children:C(t.createdAt)})]})]})},t.id))})]})},s)]})};export{Y as default};
