import{r as y,j as e,m as o}from"./animation-vendor-BWQ_wUI_.js";import{s as f,c as Ee,f as _e,g as Le,L as Se,C as n,A as Xe,a as $,b as S,d as v,e as se,h as te}from"./index-DVb5-10c.js";import{i as Ue,r as Be,l as O,h as ae,f as le,Z as ie,T as W,k as ze,o as F,e as Oe,A as We,B as re,p as ne,j as ce,U as Fe,M as qe,m as He}from"./ui-vendor-DEyZM_km.js";import{d as Ze,e as Qe}from"./apollo-vendor-NpLSqJf6.js";import"./react-vendor-DJG_os-6.js";const Je=Qe`
  query GetComprehensiveDashboard($userId: Int!, $login: String!) {
    # User information with all attributes including avatar
    user(where: { login: { _eq: $login } }) {
      id
      login
      firstName
      lastName
      profile
      attrs
      createdAt
      updatedAt
      campus
      auditRatio
      totalUp
      totalDown
    }
    
    # User transactions with full details
    userTransactions: transaction(where: { userId: { _eq: $userId } }, order_by: { createdAt: desc }) {
      id
      type
      amount
      path
      createdAt
      attrs
      objectId
      eventId
    }
    
    # User progress with full details
    userProgress: progress(where: { userId: { _eq: $userId } }, order_by: { createdAt: desc }) {
      id
      grade
      isDone
      path
      createdAt
      updatedAt
      version
      objectId
      groupId
      eventId
    }
    
    # User results with full details
    userResults: result(where: { userId: { _eq: $userId } }, order_by: { createdAt: desc }) {
      id
      grade
      type
      path
      createdAt
      isLast
      version
      objectId
      groupId
      eventId
      attrs
    }
    
    # Audits given by user
    auditsGiven: audit(where: { auditorId: { _eq: $userId } }, order_by: { createdAt: desc }) {
      id
      groupId
      grade
      createdAt
      updatedAt
      version
      endAt
      attrs
      resultId
    }
    
    # Groups where user is member or captain
    userGroups: group_user(where: { userId: { _eq: $userId } }) {
      id
      groupId
      createdAt
      updatedAt
      group {
        id
        captainId
        status
        path
        campus
        objectId
        eventId
      }
    }
    
    # User event participation
    userEvents: event_user(where: { userId: { _eq: $userId } }) {
      id
      eventId
      level
      createdAt
      event {
        id
        path
        campus
        createdAt
        endAt
        objectId
      }
    }
  }
`,D={primary:"#3B82F6",success:"#10B981"},ts=({user:P})=>{const[k,de]=y.useState("overview"),{data:h,loading:oe,error:xe}=Ze(Je,{variables:{login:P.login,userId:P.id},fetchPolicy:"cache-and-network"}),r=h?.user?.[0],g=y.useMemo(()=>h?.userTransactions||[],[h]),A=y.useMemo(()=>h?.userProgress||[],[h]),C=y.useMemo(()=>h?.userResults||[],[h]),T=y.useMemo(()=>h?.auditsGiven||[],[h]),G=y.useMemo(()=>h?.userGroups||[],[h]);y.useMemo(()=>h?.userEvents||[],[h]);const t=y.useMemo(()=>{if(!r)return null;const s=f(g),m=f(A),M=f(C),c=f(T),p=f(G),N=s.mainModule,d=m.mainModule;M.mainModule,c.mainModule,p.mainModule;const l=g.filter(a=>a.type==="xp"),x=l.reduce((a,i)=>a+(i.amount||0),0),j=l.length>0?Math.round(x/l.length):0,u=g.filter(a=>a.type==="level"),X=u.length>0?Math.max(...u.map(a=>a.amount||0)):1,H=Math.pow(X+1,2)*1e3,U=Math.pow(X,2)*1e3,ve=x>U?Math.min(100,(x-U)/(H-U)*100):0,Z=Ee(g),Ne=Z.bhModule,ye=g.filter(a=>a.type?.startsWith("skill_")),R=new Map;ye.forEach(a=>{const i=_e(a.type?.replace("skill_","")||""),L=R.get(i)||0;R.set(i,L+(a.amount||0))});const fe=Array.from(R.entries()).map(([a,i])=>({name:a,points:i})).sort((a,i)=>i.points-a.points).slice(0,8),Q=T.length,E=T.filter(a=>a.grade!==null).length,be=Q-E,we=E>0?T.filter(a=>a.grade!==null).reduce((a,i)=>a+(i.grade||0),0)/E:0,_=A.length,b=A.filter(a=>a.isDone).length,B=A.filter(a=>a.isDone&&a.grade>=1).length,Pe=b-B,Ae=_-b,z=C.length,J=z>0?C.reduce((a,i)=>a+(i.grade||0),0)/z:0,V=G.length,Y=G.filter(a=>a.group?.captainId===P.id).length,Me=V-Y,Ie=g.filter(a=>a.type==="up"),De=g.filter(a=>a.type==="down"),ke=Ie.reduce((a,i)=>a+(i.amount||0),0),Te=De.reduce((a,i)=>a+(i.amount||0),0),$e=Le(r?.auditRatio||0,x,b),Ce=new Date(Date.now()-30*24*60*60*1e3),K=N.filter(a=>new Date(a.createdAt)>Ce).length,ee=[];for(let a=5;a>=0;a--){const i=new Date(Date.now()-(a+1)*30*24*60*60*1e3),L=new Date(Date.now()-a*30*24*60*60*1e3),Ge=l.filter(I=>{const w=new Date(I.createdAt);return w>=i&&w<L}).reduce((I,w)=>I+(w.amount||0),0),Re=d.filter(I=>{const w=new Date(I.createdAt);return w>=i&&w<L&&I.isDone}).length;ee.push({month:i.toLocaleDateString("en",{month:"short"}),xp:Ge,projects:Re})}return{xp:{total:x,bhModule:Ne,piscines:Z.allPiscines,average:j,recent:K,upTotal:ke,downTotal:Te},level:{current:X,progress:ve,nextLevelXP:H},skills:{top:fe,total:R.size},projects:{completed:b,total:_,passed:B,failed:Pe,inProgress:Ae,avgGrade:J,completionRate:_>0?b/_*100:0,passRate:b>0?B/b*100:0},audits:{given:Q,completed:E,pending:be,avgGrade:we,ratio:r?.auditRatio||0},groups:{total:V,captained:Y,member:Me},results:{total:z,avgGrade:J},activity:{recent:K,monthlyData:ee},performance:$e,moduleData:{bhModule:s.mainModule.length,piscines:Object.keys(s.piscines).length,totalPiscineTransactions:s.allPiscines.length}}},[r,g,A,C,T,G,P.id]);if(oe)return e.jsx(Se,{});if(xe||!r)return e.jsx(n,{className:"p-8 text-center",children:e.jsx("p",{className:"text-gray-500",children:"Unable to load dashboard data"})});const me=[{id:"overview",label:"Overview",icon:Ue},{id:"analytics",label:"Analytics",icon:Be},{id:"activity",label:"Activity",icon:O}],q=({level:s,progress:m})=>e.jsx("div",{className:"relative w-32 h-32",children:e.jsxs("svg",{className:"w-full h-full transform -rotate-90",viewBox:"0 0 120 120",children:[e.jsx("circle",{cx:"60",cy:"60",r:"50",fill:"none",stroke:"#E5E7EB",strokeWidth:"8"}),e.jsx("circle",{cx:"60",cy:"60",r:"50",fill:"none",stroke:D.primary,strokeWidth:"8",strokeDasharray:`${2*Math.PI*50}`,strokeDashoffset:`${2*Math.PI*50*(1-m/100)}`,className:"transition-all duration-1000 ease-out"}),e.jsx("text",{x:"60",y:"65",textAnchor:"middle",className:"fill-current text-2xl font-bold transform rotate-90",style:{transformOrigin:"60px 60px"},children:s})]})}),he=({skills:s})=>{const p=Math.max(...s.map(d=>d.points),100),N=(d,l)=>{const x=100+Math.cos(d-Math.PI/2)*l,j=100+Math.sin(d-Math.PI/2)*l;return{x,y:j}};return e.jsxs("svg",{width:200,height:200,className:"mx-auto",children:[[.2,.4,.6,.8,1].map((d,l)=>e.jsx("circle",{cx:100,cy:100,r:70*d,fill:"none",stroke:"#E5E7EB",strokeWidth:"1"},l)),s.map((d,l)=>{const x=2*Math.PI*l/s.length,j=N(x,70);return e.jsx("line",{x1:100,y1:100,x2:j.x,y2:j.y,stroke:"#E5E7EB",strokeWidth:"1"},l)}),e.jsx("path",{d:s.map((d,l)=>{const x=2*Math.PI*l/s.length,j=d.points/p*70,u=N(x,j);return`${l===0?"M":"L"} ${u.x} ${u.y}`}).join(" ")+" Z",fill:`${D.primary}40`,stroke:D.primary,strokeWidth:"2"}),s.map((d,l)=>{const x=2*Math.PI*l/s.length,j=d.points/p*70,u=N(x,j);return e.jsx("circle",{cx:u.x,cy:u.y,r:"4",fill:D.primary},l)}),s.map((d,l)=>{const x=2*Math.PI*l/s.length,u=N(x,90);return e.jsx("text",{x:u.x,y:u.y,textAnchor:"middle",dominantBaseline:"middle",className:"text-xs font-medium fill-gray-600",children:d.name},l)})]})},pe=({data:s})=>{const m=Math.max(...s.map(c=>c.xp),1e3),M=Math.max(...s.map(c=>c.projects),5);return e.jsx("div",{className:"w-full h-64",children:e.jsxs("svg",{viewBox:"0 0 400 200",className:"w-full h-full",children:[[0,1,2,3,4].map(c=>e.jsx("line",{x1:"40",y1:40+c*30,x2:"360",y2:40+c*30,stroke:"#E5E7EB",strokeWidth:"1"},c)),s.map((c,p)=>e.jsx("rect",{x:60+p*50,y:160-c.xp/m*120,width:"20",height:c.xp/m*120,fill:D.primary,className:"opacity-80"},`xp-${p}`)),e.jsx("path",{d:s.map((c,p)=>{const N=80+p*50,d=160-c.projects/M*120;return`${p===0?"M":"L"} ${N} ${d}`}).join(" "),fill:"none",stroke:D.success,strokeWidth:"3"}),s.map((c,p)=>e.jsx("text",{x:70+p*50,y:"180",textAnchor:"middle",className:"text-xs fill-gray-600",children:c.month},p))]})})},je=()=>e.jsxs("div",{className:"space-y-8",children:[e.jsxs(o.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-gradient-to-br from-blue-600 via-purple-600 to-blue-800 rounded-2xl p-8 text-white relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-white/10 rounded-full -translate-y-32 translate-x-32"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-48 h-48 bg-white/5 rounded-full translate-y-24 -translate-x-24"}),e.jsxs("div",{className:"relative z-10 flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-6",children:[e.jsx(Xe,{user:{...r,avatarUrl:r?.attrs?.["pro-picUploadId"]?`https://zone01.s3.us-east-1.amazonaws.com/avatar/${r.attrs["pro-picUploadId"]}`:null},size:"2xl",className:"ring-4 ring-white/20 shadow-2xl"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:r.attrs?.displayName||r.attrs?.firstName||P.login}),e.jsxs("p",{className:"text-blue-100 mb-4",children:["@",P.login]}),t?.performance&&e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx("span",{className:"text-lg",children:t.performance.badge}),e.jsx("span",{className:`font-medium ${t.performance.color}`,children:t.performance.notation})]}),e.jsxs("div",{className:"flex items-center space-x-6 text-sm",children:[r.attrs?.addressCity&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ae,{className:"h-4 w-4"}),e.jsx("span",{children:r.attrs.addressCity})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"h-4 w-4"}),e.jsxs("span",{children:["Since ",$(r.createdAt)]})]})]})]})]}),t&&e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"mb-4",children:e.jsx(q,{level:t.level.current,progress:t.level.progress})}),e.jsxs("div",{className:"text-sm text-blue-100",children:["Level ",t.level.current," â€¢ ",t.level.progress.toFixed(1),"% to next"]})]})]})]}),t&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 xl:grid-cols-6 gap-4",children:[e.jsx(o.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:e.jsxs(n,{className:"p-4 bg-gradient-to-br from-blue-50 to-blue-100 border-blue-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:"p-2 bg-blue-500 text-white rounded-lg",children:e.jsx(ie,{className:"h-5 w-5"})}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-xl font-bold text-blue-900",children:S(t.xp.total)}),e.jsx("div",{className:"text-xs text-blue-600",children:"Total XP"})]})]}),e.jsxs("div",{className:"text-xs text-blue-600",children:["BH: ",v(t.xp.bhModule)]})]})}),e.jsx(o.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:e.jsxs(n,{className:"p-4 bg-gradient-to-br from-purple-50 to-purple-100 border-purple-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:"p-2 bg-purple-500 text-white rounded-lg",children:e.jsx(W,{className:"h-5 w-5"})}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-xl font-bold text-purple-900",children:t.projects.completed}),e.jsx("div",{className:"text-xs text-purple-600",children:"Completed"})]})]}),e.jsxs("div",{className:"text-xs text-purple-600",children:[t.projects.passed,"P / ",t.projects.failed,"F"]})]})}),e.jsx(o.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:e.jsxs(n,{className:"p-4 bg-gradient-to-br from-green-50 to-green-100 border-green-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:"p-2 bg-green-500 text-white rounded-lg",children:e.jsx(ze,{className:"h-5 w-5"})}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-xl font-bold text-green-900",children:se(t.audits.ratio)}),e.jsx("div",{className:"text-xs text-green-600",children:"Audit Ratio"})]})]}),e.jsxs("div",{className:"text-xs text-green-600",children:[t.audits.completed,"/",t.audits.given]})]})}),e.jsx(o.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},children:e.jsxs(n,{className:"p-4 bg-gradient-to-br from-orange-50 to-orange-100 border-orange-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:"p-2 bg-orange-500 text-white rounded-lg",children:e.jsx(F,{className:"h-5 w-5"})}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-xl font-bold text-orange-900",children:t.skills.total}),e.jsx("div",{className:"text-xs text-orange-600",children:"Skills"})]})]}),e.jsx("div",{className:"text-xs text-orange-600",children:t.skills.top[0]?.name||"None"})]})}),e.jsx(o.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},children:e.jsxs(n,{className:"p-4 bg-gradient-to-br from-indigo-50 to-indigo-100 border-indigo-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:"p-2 bg-indigo-500 text-white rounded-lg",children:e.jsx(Oe,{className:"h-5 w-5"})}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-xl font-bold text-indigo-900",children:t.groups.total}),e.jsx("div",{className:"text-xs text-indigo-600",children:"Groups"})]})]}),e.jsxs("div",{className:"text-xs text-indigo-600",children:[t.groups.captained,"C / ",t.groups.member,"M"]})]})}),e.jsx(o.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},children:e.jsxs(n,{className:"p-4 bg-gradient-to-br from-pink-50 to-pink-100 border-pink-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:"p-2 bg-pink-500 text-white rounded-lg",children:e.jsx(We,{className:"h-5 w-5"})}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-xl font-bold text-pink-900",children:t.level.current}),e.jsx("div",{className:"text-xs text-pink-600",children:"Level"})]})]}),e.jsxs("div",{className:"text-xs text-pink-600",children:[t.level.progress.toFixed(1),"% to next"]})]})})]}),t&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mt-8",children:[e.jsx(o.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.7},children:e.jsxs(n,{className:"p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(re,{className:"h-5 w-5 mr-2 text-purple-600"}),"Project Progress"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center p-3 bg-green-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-green-900",children:"Passed"}),e.jsx("div",{className:"text-sm text-green-600",children:"Successfully completed"})]}),e.jsx("div",{className:"text-2xl font-bold text-green-600",children:t.projects.passed})]}),e.jsxs("div",{className:"flex justify-between items-center p-3 bg-red-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-red-900",children:"Failed"}),e.jsx("div",{className:"text-sm text-red-600",children:"Need improvement"})]}),e.jsx("div",{className:"text-2xl font-bold text-red-600",children:t.projects.failed})]}),e.jsxs("div",{className:"flex justify-between items-center p-3 bg-yellow-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-yellow-900",children:"In Progress"}),e.jsx("div",{className:"text-sm text-yellow-600",children:"Currently working"})]}),e.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:t.projects.inProgress})]}),e.jsxs("div",{className:"mt-4 p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Success Rate"}),e.jsxs("span",{className:"font-bold text-gray-900",children:[t.projects.passRate.toFixed(1),"%"]})]}),e.jsxs("div",{className:"flex justify-between text-sm mt-1",children:[e.jsx("span",{className:"text-gray-600",children:"Avg Grade"}),e.jsx("span",{className:"font-bold text-gray-900",children:t.projects.avgGrade.toFixed(2)})]})]})]})]})}),e.jsx(o.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.8},children:e.jsxs(n,{className:"p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(ne,{className:"h-5 w-5 mr-2 text-green-600"}),"Audit Performance"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("div",{className:"text-3xl font-bold text-green-600 mb-2",children:se(t.audits.ratio)}),e.jsx("div",{className:"text-sm text-gray-600",children:"Overall Audit Ratio"}),t.performance&&e.jsx("div",{className:"mt-2 p-2 bg-gradient-to-r from-blue-50 to-purple-50 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx("span",{className:"text-lg",children:t.performance.badge}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:t.performance.notation})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"text-center p-3 bg-blue-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:t.audits.given}),e.jsx("div",{className:"text-xs text-blue-600",children:"Total Given"})]}),e.jsxs("div",{className:"text-center p-3 bg-green-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:t.audits.completed}),e.jsx("div",{className:"text-xs text-green-600",children:"Completed"})]})]}),e.jsxs("div",{className:"text-center p-3 bg-yellow-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:t.audits.pending}),e.jsx("div",{className:"text-xs text-yellow-600",children:"Pending Reviews"})]}),e.jsxs("div",{className:"text-center p-3 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"text-lg font-bold text-gray-900",children:t.audits.avgGrade.toFixed(2)}),e.jsx("div",{className:"text-xs text-gray-600",children:"Average Grade Given"})]})]})]})}),e.jsx(o.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.9},children:e.jsxs(n,{className:"p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(ce,{className:"h-5 w-5 mr-2 text-blue-600"}),"XP Breakdown"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("div",{className:"text-3xl font-bold text-blue-600 mb-2",children:S(t.xp.total)}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total Experience Points"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center p-3 bg-blue-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-blue-900",children:"BH Module"}),e.jsx("div",{className:"text-sm text-blue-600",children:"Main curriculum"})]}),e.jsx("div",{className:"text-lg font-bold text-blue-600",children:v(t.xp.bhModule)})]}),e.jsxs("div",{className:"flex justify-between items-center p-3 bg-purple-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-purple-900",children:"Piscines"}),e.jsx("div",{className:"text-sm text-purple-600",children:"Intensive modules"})]}),e.jsx("div",{className:"text-lg font-bold text-purple-600",children:v(t.xp.piscines)})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 mt-4",children:[e.jsxs("div",{className:"text-center p-3 bg-green-50 rounded-lg",children:[e.jsx("div",{className:"text-lg font-bold text-green-600",children:v(t.xp.upTotal)}),e.jsx("div",{className:"text-xs text-green-600",children:"UP Points"})]}),e.jsxs("div",{className:"text-center p-3 bg-red-50 rounded-lg",children:[e.jsx("div",{className:"text-lg font-bold text-red-600",children:v(t.xp.downTotal)}),e.jsx("div",{className:"text-xs text-red-600",children:"DOWN Points"})]})]}),e.jsxs("div",{className:"text-center p-3 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"text-lg font-bold text-gray-900",children:v(t.xp.average)}),e.jsx("div",{className:"text-xs text-gray-600",children:"Average XP per Project"})]})]})]})]})})]}),t&&t.skills.top.length>0&&e.jsx(o.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},children:e.jsxs(n,{className:"p-8",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-900 mb-6 flex items-center",children:[e.jsx(F,{className:"h-6 w-6 mr-3 text-blue-600"}),"Skills Mastery"]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsx("div",{children:e.jsx(he,{skills:t.skills.top})}),e.jsx("div",{className:"space-y-4",children:t.skills.top.slice(0,6).map((s,m)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-sm font-bold text-blue-600",children:m+1})}),e.jsx("span",{className:"font-medium capitalize",children:s.name.replace(/-/g," ")})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-24 h-2 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-blue-500 rounded-full transition-all duration-1000",style:{width:`${Math.min(100,s.points/Math.max(...t.skills.top.map(M=>M.points))*100)}%`}})}),e.jsx("span",{className:"text-sm font-bold text-gray-900 w-12 text-right",children:s.points})]})]},s.name))})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t&&e.jsx(o.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},children:e.jsxs(n,{className:"p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(O,{className:"h-5 w-5 mr-2 text-green-600"}),"Recent Activity"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-green-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-green-900",children:"Last 30 Days"}),e.jsx("div",{className:"text-sm text-green-600",children:"Total Actions"})]}),e.jsx("div",{className:"text-2xl font-bold text-green-600",children:t.activity.recent})]}),t.moduleData&&e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"BH Module"}),e.jsxs("span",{className:"font-medium",children:[t.moduleData.bhModule," activities"]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Piscines"}),e.jsxs("span",{className:"font-medium",children:[t.moduleData.piscines," types"]})]})]}),g?.filter(s=>f([s]).mainModule.length>0).slice(0,3).map(s=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900 capitalize",children:s.type?.replace("_"," ")}),e.jsx("div",{className:"text-sm text-gray-500",children:s.object?.name||"System"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"font-bold text-blue-600",children:s.type==="xp"?`+${v(s.amount)}`:s.type==="level"?`Level ${s.amount}`:`+${s.amount}`}),e.jsx("div",{className:"text-xs text-gray-500",children:$(s.createdAt)})]})]},s.id))]})]})}),e.jsx(o.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.7},children:e.jsxs(n,{className:"p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(Fe,{className:"h-5 w-5 mr-2 text-blue-600"}),"Profile Information"]}),e.jsxs("div",{className:"space-y-4",children:[r.attrs?.email&&e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(qe,{className:"h-5 w-5 text-gray-400"}),e.jsx("span",{className:"text-gray-600",children:r.attrs.email})]}),r.attrs?.addressCountry&&e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ae,{className:"h-5 w-5 text-gray-400"}),e.jsx("span",{className:"text-gray-600",children:r.attrs.addressCountry})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(le,{className:"h-5 w-5 text-gray-400"}),e.jsxs("span",{className:"text-gray-600",children:["Joined ",$(r.createdAt)]})]}),t&&e.jsx("div",{className:"mt-6 pt-4 border-t",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:t.groups.total}),e.jsx("div",{className:"text-sm text-gray-500",children:"Total Groups"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:t.audits.given}),e.jsx("div",{className:"text-sm text-gray-500",children:"Audits Given"})]})]})})]})]})})]})]}),ue=()=>e.jsx("div",{className:"space-y-8",children:t&&e.jsxs(e.Fragment,{children:[e.jsx(o.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:e.jsxs(n,{className:"p-8",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-900 mb-6 flex items-center",children:[e.jsx(ce,{className:"h-6 w-6 mr-3 text-green-600"}),"Performance Trends (6 Months)"]}),e.jsx(pe,{data:t.activity.monthlyData}),e.jsxs("div",{className:"mt-4 flex justify-center space-x-8 text-sm",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-4 h-4 bg-blue-500 rounded"}),e.jsx("span",{children:"XP Earned"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-4 h-3 border-2 border-green-500 rounded"}),e.jsx("span",{children:"Projects Completed"})]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(n,{className:"p-6",children:[e.jsxs("h4",{className:"text-lg font-semibold mb-4 flex items-center",children:[e.jsx(ne,{className:"h-5 w-5 mr-2 text-blue-600"}),"Level Progress"]}),e.jsx("div",{className:"text-center mb-6",children:e.jsx(q,{level:t.level.current,progress:t.level.progress})}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Current Level"}),e.jsx("span",{className:"font-bold",children:t.level.current})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Total XP"}),e.jsx("span",{className:"font-bold",children:S(t.xp.total)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Next Level XP"}),e.jsx("span",{className:"font-bold",children:S(t.level.nextLevelXP)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Progress"}),e.jsxs("span",{className:"font-bold text-blue-600",children:[t.level.progress.toFixed(1),"%"]})]})]})]}),e.jsxs(n,{className:"p-6",children:[e.jsxs("h4",{className:"text-lg font-semibold mb-4 flex items-center",children:[e.jsx(re,{className:"h-5 w-5 mr-2 text-purple-600"}),"Project Analytics"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-purple-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-purple-900",children:t.projects.completed}),e.jsx("div",{className:"text-sm text-purple-600",children:"Completed"})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-lg font-bold text-gray-600",children:["/ ",t.projects.total]}),e.jsx("div",{className:"text-sm text-gray-500",children:"Total"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Completion Rate"}),e.jsxs("span",{className:"font-bold text-purple-600",children:[t.projects.completionRate.toFixed(1),"%"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Average Grade"}),e.jsx("span",{className:"font-bold",children:te(t.projects.avgGrade)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"XP per Project"}),e.jsx("span",{className:"font-bold",children:v(t.xp.average)})]})]})]})]})]})]})}),ge=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs(n,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Recent Transactions"}),e.jsx("div",{className:"space-y-3",children:g?.filter(s=>f([s]).mainModule.length>0).slice(0,10).map(s=>e.jsxs(o.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"flex items-center justify-between p-4 border rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:`p-2 rounded-full ${s.type==="xp"?"bg-blue-100 text-blue-600":s.type==="level"?"bg-purple-100 text-purple-600":s.type?.startsWith("skill_")?"bg-green-100 text-green-600":"bg-gray-100 text-gray-600"}`,children:s.type==="xp"?e.jsx(ie,{className:"h-4 w-4"}):s.type==="level"?e.jsx(W,{className:"h-4 w-4"}):s.type?.startsWith("skill_")?e.jsx(F,{className:"h-4 w-4"}):e.jsx(O,{className:"h-4 w-4"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium capitalize",children:s.type?.replace("_"," ")}),e.jsx("div",{className:"text-sm text-gray-500",children:s.object?.name||"System Action"}),e.jsx("div",{className:"text-xs text-gray-400",children:$(s.createdAt)})]})]}),e.jsx("div",{className:`text-right font-bold ${s.type==="xp"?"text-blue-600":s.type==="level"?"text-purple-600":s.type?.startsWith("skill_")?"text-green-600":"text-gray-600"}`,children:s.type==="xp"?`+${v(s.amount)}`:s.type==="level"?`Level ${s.amount}`:`+${s.amount}`})]},s.id))})]}),e.jsxs(n,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Recent Progress"}),e.jsx("div",{className:"space-y-3",children:A?.filter(s=>f([s]).mainModule.length>0).slice(0,8).map(s=>e.jsxs(o.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"flex items-center justify-between p-4 border rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:`p-2 rounded-full ${s.isDone?"bg-green-100 text-green-600":"bg-yellow-100 text-yellow-600"}`,children:s.isDone?e.jsx(W,{className:"h-4 w-4"}):e.jsx(He,{className:"h-4 w-4"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:s.object?.name||"Project"}),e.jsx("div",{className:"text-sm text-gray-500",children:s.isDone?"Completed":"In Progress"}),e.jsx("div",{className:"text-xs text-gray-400",children:$(s.createdAt)})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"font-bold text-blue-600",children:te(s.grade)}),e.jsx("div",{className:"text-xs text-gray-500",children:"Grade"})]})]},s.id))})]})]});return e.jsxs("div",{className:"max-w-7xl mx-auto space-y-8",children:[e.jsx("div",{className:"border-b border-gray-200 bg-white rounded-lg p-1",children:e.jsx("nav",{className:"flex space-x-1",children:me.map(s=>{const m=s.icon;return e.jsxs("button",{onClick:()=>de(s.id),className:`
                  flex items-center space-x-2 px-6 py-3 rounded-lg font-medium text-sm transition-all
                  ${k===s.id?"bg-blue-600 text-white shadow-lg shadow-blue-200":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"}
                `,children:[e.jsx(m,{className:"h-5 w-5"}),e.jsx("span",{children:s.label})]},s.id)})})}),e.jsxs(o.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:[k==="overview"&&je(),k==="analytics"&&ue(),k==="activity"&&ge()]},k)]})};export{ts as default};
