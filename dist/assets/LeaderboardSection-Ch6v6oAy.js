import{r as h,R as me,j as e,m as x}from"./animation-vendor-w_1g82yL.js";import{C as he}from"./Card-Dh5KB05c.js";import{L as ue,A as xe,b as be}from"./index-CDiERX6D.js";import{G as ge,a as pe,b as fe}from"./allQueries-C1LmK1xE.js";import{T as F,U as Z,s as ee,o as ve,X as we,Y as Ne,q as je,_ as ye,$ as Le,a0 as Ce,a1 as ke,a2 as Se,l as Ae,A as Ee,a3 as Re,a4 as Ue,r as $e,a5 as Me,a6 as Te}from"./ui-vendor-DqcOv3sU.js";import{d as O}from"./apollo-vendor-8AJvV5pX.js";import"./react-vendor-DJG_os-6.js";const He=({user:k})=>{const[m,z]=h.useState("level"),[p,E]=h.useState("all"),[b,G]=h.useState(""),[R,te]=h.useState(""),[U,ae]=h.useState(1),[g,re]=h.useState("desc"),[$,se]=h.useState(100),{data:c,loading:q}=O(ge,{errorPolicy:"all",fetchPolicy:"cache-and-network"}),{data:S,loading:V}=O(pe,{errorPolicy:"all",fetchPolicy:"cache-and-network"}),{data:y,loading:W}=O(fe,{errorPolicy:"all",fetchPolicy:"cache-and-network"}),H=h.useMemo(()=>(y?.label||[]).filter(r=>r.name.toLowerCase().includes("cohort")).map(r=>{const l=r.name.toLowerCase();let s=r.name;return l.includes("cohort4")||l.includes("cohort-4")?s="Cohort 4":l.includes("cohort1")?s="Cohort 1":l.includes("cohort2")?s="Cohort 2":l.includes("cohort3")&&(s="Cohort 3"),{id:r.id,name:s,description:r.description||""}}).filter((r,l,s)=>s.findIndex(i=>i.name===r.name)===l),[y?.label]),X=h.useMemo(()=>{const t=new Map;return y?.label&&y.label.forEach(o=>{const a=o.name.toLowerCase(),r=o.description||"";if(!a.includes("cohort"))return;const l=[/module #(\d+)/i,/event #(\d+)/i,/event (\d+)/i,/#(\d+)/i,/id:?\s*(\d+)/i];let s=null;for(const i of l){const d=r.match(i);if(d){s=parseInt(d[1],10);break}}if(s){let i=o.name;a.includes("cohort4")||a.includes("cohort-4")?i="Cohort 4":a.includes("cohort1")?i="Cohort 1":a.includes("cohort2")?i="Cohort 2":a.includes("cohort3")&&(i="Cohort 3"),t.set(s,i)}}),t.size===0,t},[y?.label]),Y=h.useMemo(()=>{const t=new Map,o=S?.label_user||[],a=c?.userLabels||[];return[...o,...a].forEach(s=>{if(s.label?.name?.toLowerCase().includes("cohort")){const i=s.userId;t.has(i)||t.set(i,[]);const d=s.label,n=d.name.toLowerCase();let f=d.name;n.includes("cohort4")||n.includes("cohort-4")?f="Cohort 4":n.includes("cohort1")?f="Cohort 1":n.includes("cohort2")?f="Cohort 2":n.includes("cohort3")&&(f="Cohort 3");const v={...s,label:{...d,name:f}};t.get(i).push(v)}}),(c?.allEventUsers||[]).forEach(s=>{const i=s.userId,d=s.eventId,n=X.get(d);if(n&&i&&(t.has(i)||t.set(i,[]),!(t.get(i)||[]).some(w=>w.label.name===n))){const w={id:d*1e6+i,userId:i,labelId:d,label:{id:d,name:n,description:`Cohort based on Event ${d} participation`}};t.get(i).push(w)}}),t.forEach((s,i)=>{const d=new Set,n=s.filter(f=>{const v=f.label.name;return d.has(v)?!1:(d.add(v),!0)});t.set(i,n)}),t},[S?.label_user,c?.userLabels,c?.allEventUsers,X]);me.useEffect(()=>{},[q,c,V,S,W,y]);const M=q||V||W,le=!c&&!M,u=h.useMemo(()=>{if(!c?.bhModuleUsers)return[];const t=new Map,o=new Map;return c.allUsersWithEvents&&c.allUsersWithEvents.forEach(a=>{t.set(a.id,a)}),c.publicUsers&&c.publicUsers.forEach(a=>{o.set(a.id,a)}),c.bhModuleUsers.map((a,r)=>{const l=a.userId,s=a.userLogin,i=a.userName,d=Number(a.userAuditRatio)||0;if(!l)return null;let n=t.get(l);n||(n=o.get(l));const v=(Y.get(l)||[]).filter(C=>C.label?.name?.toLowerCase().includes("cohort")),w=v.map(C=>C.label.name);let _="No Cohort";w.length>0&&(_=w[0]);const Q=v;if(!n){const C=i?i.split(" "):[];return{id:l,login:s||`user_${l}`,firstName:C[0]||"",lastName:C.slice(1).join(" ")||"",profile:"",attrs:{},auditRatio:d,totalUp:0,totalDown:0,level:a.level||0,totalXP:0,cohort:_,eventPath:"/bahrain/bh-module",createdAt:a.createdAt,rank:r+1,userLabels:Q,labelNames:w}}return{id:l,login:n.login||s||`user_${l}`,firstName:n.firstName||"",lastName:n.lastName||"",profile:n.profile||"",attrs:n.attrs||{},auditRatio:d,totalUp:n.totalUp||0,totalDown:n.totalDown||0,level:a.level||0,totalXP:n.totalUp||0,cohort:_,eventPath:"/bahrain/bh-module",createdAt:n.createdAt||a.createdAt,rank:r+1,userLabels:Q,labelNames:w}}).filter(Boolean)},[c,Y]),oe=h.useMemo(()=>{const t=new Set(["all"]);return u.forEach(a=>{a.labelNames&&a.labelNames.length>0&&a.labelNames.forEach(r=>{t.add(r)}),a.cohort&&a.cohort!=="No Cohort"&&t.add(a.cohort)}),Array.from(t).sort()},[u]),T=h.useMemo(()=>{let t=[...u];return p!=="all"&&(t=t.filter(o=>o.labelNames?.includes(p)||o.cohort===p)),b&&(t=t.filter(o=>o.login.toLowerCase().includes(b.toLowerCase())||o.firstName?.toLowerCase().includes(b.toLowerCase())||o.lastName?.toLowerCase().includes(b.toLowerCase()))),R&&(t=t.filter(o=>(o.userLabels?.filter(r=>r.label.name.toLowerCase().includes("cohort"))||[]).some(r=>r.label.name.toLowerCase().includes(R.toLowerCase()))||o.cohort?.toLowerCase().includes(R.toLowerCase()))),U>1&&(t=t.filter(o=>(o.level||0)>=U)),t.sort((o,a)=>{let r,l;switch(m){case"level":r=o.level||0,l=a.level||0;break;case"audit":r=Number(o.auditRatio)||0,l=Number(a.auditRatio)||0;break;default:r=o.level||0,l=a.level||0}return g==="desc"?l-r:r-l}),t},[u,p,b,R,U,m,g]),N=h.useMemo(()=>{const o=[...u].sort((a,r)=>{let l,s;switch(m){case"level":l=a.level||0,s=r.level||0;break;case"audit":l=Number(a.auditRatio)||0,s=Number(r.auditRatio)||0;break;default:l=a.level||0,s=r.level||0}m==="audit"&&(isFinite(l)||(l=0),isFinite(s)||(s=0));const i=g==="desc"?s-l:l-s;if(i!==0)return i;if(m==="audit"){const d=g==="desc"?(r.level||0)-(a.level||0):(a.level||0)-(r.level||0);if(d!==0)return d}return a.login.localeCompare(r.login)}).findIndex(a=>a.id===k.id);return o>=0?o+1:null},[u,k.id,m,g]),ie=h.useCallback(t=>{const a=[...u].sort((r,l)=>{let s,i;switch(m){case"level":s=r.level||0,i=l.level||0;break;case"audit":s=Number(r.auditRatio)||0,i=Number(l.auditRatio)||0;break;default:s=r.level||0,i=l.level||0}m==="audit"&&(isFinite(s)||(s=0),isFinite(i)||(i=0));const d=g==="desc"?i-s:s-i;if(d!==0)return d;if(m==="audit"){const n=g==="desc"?(l.level||0)-(r.level||0):(r.level||0)-(l.level||0);if(n!==0)return n}return r.login.localeCompare(l.login)}).findIndex(r=>r.id===t);return a>=0?a+1:null},[u,m,g]),L=c?.bhModuleStats?.aggregate?.count||u.length,ne=c?.bhModuleStats?.aggregate?.max?.level||Math.max(...u.map(t=>t.level||0),0),P=c?.bhModuleStats?.aggregate?.avg?.level||u.reduce((t,o)=>t+(o.level||0),0)/Math.max(L,1),B=u.map(t=>Number(t.auditRatio)||0).filter(t=>isFinite(t)&&t>0),I=B.length>0?B.reduce((t,o)=>t+o,0)/B.length:0,D=t=>t==="all"?"All Cohorts":t.charAt(0).toUpperCase()+t.slice(1),J=t=>{switch(t){case 1:return e.jsxs("div",{className:"relative flex items-center justify-center",children:[e.jsx(Me,{className:"w-6 h-6 text-yellow-400 drop-shadow-lg"}),e.jsx(Te,{className:"w-3 h-3 text-yellow-300 absolute -top-1 -right-1 animate-pulse"})]});case 2:return e.jsxs("div",{className:"relative flex items-center justify-center",children:[e.jsx(Ue,{className:"w-6 h-6 text-slate-300 drop-shadow-lg"}),e.jsx($e,{className:"w-3 h-3 text-slate-200 absolute -top-1 -right-1"})]});case 3:return e.jsxs("div",{className:"relative flex items-center justify-center",children:[e.jsx(Ee,{className:"w-6 h-6 text-amber-500 drop-shadow-lg"}),e.jsx(Re,{className:"w-3 h-3 text-amber-400 absolute -top-1 -right-1"})]});case 4:case 5:return e.jsx(F,{className:"w-5 h-5 text-orange-400"});case 6:case 7:case 8:case 9:case 10:return e.jsx(Ae,{className:"w-5 h-5 text-purple-400"});default:return t<=20?e.jsx(ke,{className:"w-4 h-4 text-blue-400"}):t<=50?e.jsx(Se,{className:"w-4 h-4 text-emerald-400"}):e.jsxs("span",{className:"text-white/60 font-bold text-sm",children:["#",t]})}},j=t=>{switch(t){case 1:return{title:"üëë Legend",subtitle:"Ultimate Champion",color:"text-yellow-400"};case 2:return{title:"ü•à Master",subtitle:"Elite Performer",color:"text-slate-300"};case 3:return{title:"ü•â Expert",subtitle:"Distinguished",color:"text-amber-500"};case 4:case 5:return{title:"üèÜ Champion",subtitle:"Top Tier",color:"text-orange-400"};case 6:case 7:case 8:case 9:case 10:return{title:"üõ°Ô∏è Elite",subtitle:"Top 10",color:"text-purple-400"};default:return t<=20?{title:"‚≠ê Rising Star",subtitle:"Top 20",color:"text-blue-400"}:t<=50?{title:"üíé Achiever",subtitle:"Top 50",color:"text-emerald-400"}:t<=100?{title:"üöÄ Climber",subtitle:"Top 100",color:"text-cyan-400"}:{title:"üåü Participant",subtitle:"Keep Going!",color:"text-white/60"}}},de=t=>{switch(t){case 1:return"bg-gradient-to-r from-yellow-500/20 to-yellow-600/20 border-yellow-500/30 shadow-lg shadow-yellow-500/20 ring-1 ring-yellow-400/20";case 2:return"bg-gradient-to-r from-slate-400/20 to-slate-500/20 border-slate-400/30 shadow-lg shadow-slate-500/20 ring-1 ring-slate-300/20";case 3:return"bg-gradient-to-r from-amber-500/20 to-amber-600/20 border-amber-500/30 shadow-lg shadow-amber-500/20 ring-1 ring-amber-400/20";case 4:case 5:return"bg-gradient-to-r from-orange-500/15 to-orange-600/15 border-orange-500/25 shadow-md shadow-orange-500/15";case 6:case 7:case 8:case 9:case 10:return"bg-gradient-to-r from-purple-500/15 to-purple-600/15 border-purple-500/25 shadow-md shadow-purple-500/15";default:return t<=20?"bg-gradient-to-r from-blue-500/10 to-blue-600/10 border-blue-500/20 hover:bg-blue-500/15":t<=50?"bg-gradient-to-r from-emerald-500/10 to-emerald-600/10 border-emerald-500/20 hover:bg-emerald-500/15":"bg-gradient-to-r from-white/5 to-white/2 border-white/10 hover:bg-white/10 hover:border-emerald-400/20"}},K=()=>{const t=p!=="all"?` - ${D(p)}`:"";switch(m){case"level":return`Level Rankings${t}`;case"audit":return`Audit Ratio Rankings${t}`;default:return`Leaderboard${t}`}},ce=t=>{switch(m){case"level":return{value:`Level ${t.level||0}`,subValue:""};case"audit":return{value:(Number(t.auditRatio)||0).toFixed(1),subValue:""};default:return{value:`${t.level||0}`,subValue:""}}};return M?e.jsx(ue,{}):le?e.jsx(he,{className:"p-6",children:e.jsxs("div",{className:"text-center text-red-400",children:[e.jsx("p",{children:"Error loading leaderboard data"}),e.jsx("p",{className:"text-sm text-white/60 mt-2",children:"Unable to load required data"})]})}):e.jsxs("div",{className:"bg-gradient-to-br from-slate-900 via-emerald-900/20 to-slate-900 h-full w-full relative",children:[e.jsxs("div",{className:"fixed inset-0 opacity-30 pointer-events-none z-0",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-emerald-500/5 to-teal-500/5"}),e.jsx("div",{className:"absolute inset-0",style:{backgroundImage:"radial-gradient(circle at 35px 35px, rgba(52, 211, 153, 0.1) 2px, transparent 0)",backgroundSize:"70px 70px"}})]}),e.jsx("div",{className:"relative z-10 h-full w-full overflow-y-auto custom-scrollbar",children:e.jsxs("div",{className:"relative space-y-8 p-6",children:[(S?.label_user?.length||0)<=1&&!V&&e.jsx(x.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-amber-500/10 border border-amber-500/20 rounded-xl p-4 mb-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-2 h-2 bg-amber-400 rounded-full animate-pulse"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-amber-200 text-sm font-medium",children:"Label Access Limited"}),e.jsxs("p",{className:"text-amber-100/70 text-xs mt-1",children:["Only ",S?.label_user?.length||0,' label assignment(s) accessible. Users may show "No labels" due to database permissions.']})]})]})}),e.jsxs(x.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.6},className:"text-center space-y-6",children:[e.jsxs(x.div,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:{type:"spring",stiffness:200,damping:15},className:"inline-flex items-center justify-center w-24 h-24 bg-gradient-to-r from-emerald-500/20 to-teal-500/20 rounded-full backdrop-blur-xl border border-emerald-400/30 mb-6 shadow-2xl shadow-emerald-500/20 relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-emerald-400/10 to-teal-400/10 animate-pulse"}),e.jsx(F,{className:"w-12 h-12 text-emerald-400 drop-shadow-lg relative z-10"})]}),e.jsxs(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3,duration:.6},children:[e.jsx("h1",{className:"text-5xl font-bold bg-gradient-to-r from-yellow-200 via-emerald-100 to-teal-100 bg-clip-text text-transparent mb-4",children:"üèÜ Elite Leaderboard üéÜ"}),e.jsxs("p",{className:"text-xl text-white/70 max-w-3xl mx-auto",children:["Competitive rankings for ",e.jsx("span",{className:"text-yellow-400 font-bold",children:L})," exceptional students üöÄ",e.jsx("br",{}),e.jsx("span",{className:"text-base text-white/60 mt-2 block",children:"‚ú® Celebrating excellence, dedication, and continuous growth ‚ú®"})]})]})]}),e.jsxs(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1},className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-6",children:[e.jsx(A,{icon:Z,title:"Total Students",value:L.toLocaleString(),color:"bg-gradient-to-r from-blue-500/30 to-cyan-500/30",bgGradient:"bg-gradient-to-br from-blue-900/20 to-cyan-900/20",subValue:`üöÄ ${L>100?"Thriving":"Growing"} community`}),e.jsx(A,{icon:ee,title:"Average Level",value:`‚ö° ${P.toFixed(1)}`,color:"bg-gradient-to-r from-green-500/30 to-emerald-500/30",bgGradient:"bg-gradient-to-br from-green-900/20 to-emerald-900/20",subValue:`üéØ Peak: ${ne} | üî• ${P>10?"Exceptional":P>5?"Strong":"Rising"}`,trend:P>5?{value:12,isPositive:!0}:void 0}),e.jsx(A,{icon:ve,title:"Community Score",value:`üíØ ${I.toFixed(2)}`,color:"bg-gradient-to-r from-pink-500/30 to-rose-500/30",bgGradient:"bg-gradient-to-br from-pink-900/20 to-rose-900/20",subValue:`ü§ù ${I>1.5?"Outstanding":I>1?"Excellent":"Building"} collaboration`,trend:I>1?{value:8,isPositive:!0}:void 0}),e.jsx(A,{icon:we,title:"Elite Members",value:`üèÜ ${u.filter(t=>t.level&&t.level>=10).length}`,color:"bg-gradient-to-r from-purple-500/30 to-violet-500/30",bgGradient:"bg-gradient-to-br from-purple-900/20 to-violet-900/20",subValue:"üéÜ Level 10+ achievers"}),e.jsx(A,{icon:Ne,title:"Rising Stars",value:`‚≠ê ${u.filter(t=>t.level&&t.level>=5&&t.level<10).length}`,color:"bg-gradient-to-r from-orange-500/30 to-amber-500/30",bgGradient:"bg-gradient-to-br from-orange-900/20 to-amber-900/20",subValue:"üöÄ Level 5-9 climbers"})]}),e.jsxs(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.15},className:"bg-gradient-to-br from-white/5 to-white/2 backdrop-blur-xl rounded-2xl p-6 border border-white/10 hover:bg-white/10 hover:border-emerald-400/30 transition-all duration-300 shadow-xl hover:shadow-2xl hover:shadow-emerald-500/10",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-emerald-500/30 to-teal-500/30 rounded-xl flex items-center justify-center backdrop-blur-sm border border-emerald-400/20",children:e.jsx(Z,{className:"w-4 h-4 text-emerald-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:"Available Cohort Labels"}),e.jsx("p",{className:"text-sm text-white/60",children:"Dynamic cohort detection from database"})]})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:H.length>0?H.map((t,o)=>e.jsx(x.span,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:o*.05},className:"px-3 py-1.5 bg-gradient-to-r from-emerald-500/20 to-teal-500/20 text-emerald-300 rounded-xl text-sm font-medium border border-emerald-400/30 hover:bg-emerald-500/30 hover:border-emerald-400/50 transition-all duration-300 cursor-pointer backdrop-blur-sm",title:t.description,onClick:()=>te(t.name),children:t.name},t.id)):e.jsxs("div",{className:"flex items-center space-x-2 text-yellow-400",children:[e.jsx("div",{className:"w-2 h-2 bg-yellow-400 rounded-full animate-pulse"}),e.jsx("span",{className:"text-sm",children:"No cohort labels detected or limited database access"})]})}),H.length>0&&e.jsx("p",{className:"text-xs text-white/50 mt-3",children:"üí° Click on a cohort label to search for users with that label"})]}),e.jsx(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:"flex flex-wrap gap-2 justify-center",children:[{key:"level",label:"üìä Level Rankings",icon:ee},{key:"audit",label:"‚öñÔ∏è Audit Rankings",icon:je}].map(({key:t,label:o,icon:a})=>e.jsxs("button",{onClick:()=>z(t),className:`flex items-center space-x-2 px-6 py-3 rounded-xl font-semibold transition-all duration-300 relative overflow-hidden ${m===t?"bg-gradient-to-r from-emerald-500 to-teal-500 text-white shadow-lg shadow-emerald-500/30 border border-white/20":"bg-white/10 text-white/70 hover:bg-emerald-500/20 hover:text-white hover:border-emerald-400/30 border border-transparent"}`,children:[e.jsx(a,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:o})]},t))}),e.jsx(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.3},className:"space-y-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-center justify-between",children:[e.jsxs("div",{className:"relative flex-1 max-w-md",children:[e.jsx(ye,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-white/50 w-4 h-4"}),e.jsx("input",{type:"text",placeholder:"Search by username, full name",value:b,onChange:t=>G(t.target.value),className:"w-full pl-10 pr-4 py-3 bg-white/10 border border-white/20 rounded-xl text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-emerald-400/50 focus:border-emerald-400/50 backdrop-blur-sm transition-all duration-300"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("select",{value:p,onChange:t=>E(t.target.value),className:"bg-white/10 border border-white/20 rounded-xl px-3 py-3 text-white focus:outline-none focus:ring-2 focus:ring-emerald-400/50 focus:border-emerald-400/50 backdrop-blur-sm transition-all duration-300",children:oe.map(t=>e.jsx("option",{value:t,children:D(t)},t))}),e.jsxs("select",{value:U,onChange:t=>ae(Number(t.target.value)),className:"bg-white/10 border border-white/20 rounded-xl px-3 py-3 text-white focus:outline-none focus:ring-2 focus:ring-emerald-400/50 focus:border-emerald-400/50 backdrop-blur-sm transition-all duration-300",children:[e.jsx("option",{value:1,children:"All Levels"}),e.jsx("option",{value:5,children:"Level 5+"}),e.jsx("option",{value:10,children:"Level 10+"}),e.jsx("option",{value:20,children:"Level 20+"}),e.jsx("option",{value:40,children:"Level 40+"}),e.jsx("option",{value:80,children:"Level 80+"}),e.jsx("option",{value:100,children:"Level 100+"})]}),e.jsxs("button",{onClick:()=>re(g==="desc"?"asc":"desc"),className:"flex items-center space-x-2 px-3 py-3 bg-white/10 hover:bg-emerald-500/20 border border-white/20 hover:border-emerald-400/30 rounded-xl text-white transition-all duration-300 backdrop-blur-sm",children:[g==="desc"?e.jsx(Le,{className:"w-4 h-4"}):e.jsx(Ce,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:g==="desc"?"High to Low":"Low to High"})]})]})]})}),N&&e.jsx(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.4},children:e.jsxs("div",{className:"p-6 bg-gradient-to-r from-emerald-500/15 to-teal-500/15 border border-emerald-500/30 backdrop-blur-xl rounded-3xl shadow-2xl relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-emerald-400/5 to-teal-400/5 animate-pulse"}),e.jsx("div",{className:"absolute top-2 right-2 w-20 h-20 bg-gradient-to-br from-emerald-300/10 to-teal-300/10 rounded-full blur-xl"}),e.jsxs("div",{className:"flex items-center justify-between relative z-10",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"relative",children:[J(N),N<=3&&e.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-yellow-400/20 to-emerald-400/20 rounded-full animate-pulse"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-bold text-lg",children:"üéÜ Your Elite Position"}),e.jsx("p",{className:"text-white/70 text-sm",children:K()}),e.jsx("div",{className:"flex items-center space-x-2 mt-1",children:e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${j(N).color} bg-white/10 border border-current/30`,children:j(N).title})})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-3xl font-bold text-emerald-400 mb-1",children:["#",N]}),e.jsxs("p",{className:"text-white/60 text-sm",children:["of ",L," students"]}),e.jsx("div",{className:"text-xs text-emerald-300 mt-1",children:j(N).subtitle})]})]})]})}),e.jsxs(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.5},className:"bg-gradient-to-br from-white/5 to-white/2 backdrop-blur-xl rounded-2xl p-6 border border-white/10 hover:bg-white/10 hover:border-emerald-400/30 transition-all duration-300 shadow-xl hover:shadow-2xl hover:shadow-emerald-500/10",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-white flex items-center",children:[e.jsx("div",{className:"w-6 h-6 bg-gradient-to-r from-emerald-500/30 to-teal-500/30 rounded-lg flex items-center justify-center mr-3 backdrop-blur-sm border border-emerald-400/20",children:e.jsx(F,{className:"w-3.5 h-3.5 text-emerald-400"})}),K(),e.jsxs("span",{className:"ml-2 text-emerald-400",children:["(",T.length,")"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-white/60 text-sm",children:"Show:"}),e.jsxs("select",{value:$,onChange:t=>se(Number(t.target.value)),className:"bg-white/10 border border-white/20 rounded-xl px-3 py-2 text-white text-sm focus:outline-none focus:ring-2 focus:ring-emerald-400/50 focus:border-emerald-400/50 backdrop-blur-sm transition-all duration-300",children:[e.jsx("option",{value:50,children:"50"}),e.jsx("option",{value:100,children:"100"}),e.jsx("option",{value:200,children:"200"}),e.jsx("option",{value:500,children:"500"})]})]})]}),e.jsxs("div",{className:"space-y-2 max-h-96 overflow-y-auto custom-scrollbar",children:[T.slice(0,$).map((t,o)=>{const a=ie(t.id)||o+1,r=t.id===k.id,l=ce(t);return e.jsxs(x.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:o*.02},className:`flex items-center justify-between p-3 rounded-xl border transition-all duration-300 backdrop-blur-sm ${r?"bg-emerald-500/20 border-emerald-500/30 ring-1 ring-emerald-500/20 shadow-lg shadow-emerald-500/10":de(a)}`,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"flex items-center justify-center w-8 h-8",children:J(a)}),e.jsx(xe,{user:t,size:"sm",className:"w-8 h-8"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("h4",{className:"text-white font-medium",children:t.firstName&&t.lastName?`${t.firstName} ${t.lastName}`:t.login}),a<=10&&e.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full border ${j(a).color} bg-white/5`,children:j(a).title})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[t.firstName&&t.lastName&&e.jsxs("span",{className:"text-xs text-white/60",children:["@",t.login]}),a<=50&&a>10&&e.jsx("span",{className:`text-xs ${j(a).color}`,children:j(a).subtitle})]})]}),r&&e.jsx("span",{className:"px-2 py-1 bg-emerald-500/20 text-emerald-400 rounded-lg text-xs font-medium border border-emerald-400/30",children:"You"})]}),null,e.jsxs("div",{className:"flex items-center space-x-2 text-xs text-white/60 mt-1",children:[t.userLabels&&t.userLabels.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1",children:t.userLabels.map((s,i)=>e.jsxs("span",{className:"px-1.5 py-0.5 bg-gradient-to-r from-emerald-400/20 to-teal-400/20 text-emerald-400 rounded-lg text-xs font-medium border border-emerald-400/30 backdrop-blur-sm",title:`Cohort Label: ${s.label.name}`,children:["üè∑Ô∏è ",s.label.name]},s.id||i))}),(!t.userLabels||t.userLabels.length===0)&&e.jsx("span",{className:"text-yellow-400 text-xs",children:"No cohort labels"}),e.jsxs("span",{className:"ml-auto",children:["Joined ",be(t.createdAt)]})]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-lg font-bold text-white",children:l.value}),e.jsx("div",{className:"text-xs text-white/60",children:l.subValue})]})]},t.id)}),T.length>$&&e.jsx("div",{className:"text-center py-4",children:e.jsxs("p",{className:"text-white/60 text-sm",children:["Showing ",$," of ",L," users"]})})]})]}),M&&e.jsx("div",{className:"bg-gradient-to-br from-white/5 to-white/2 backdrop-blur-xl rounded-2xl p-6 border border-white/10",children:e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-emerald-400"}),e.jsx("span",{className:"ml-3 text-white/70",children:"Loading leaderboard data..."})]})}),T.length===0&&!M&&e.jsxs(x.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-12",children:[e.jsx(F,{className:"w-16 h-16 text-white/30 mx-auto mb-4"}),e.jsx("h3",{className:"text-white/70 text-lg font-medium mb-2",children:"No users found"}),e.jsx("p",{className:"text-white/50",children:"Try adjusting your search criteria or filters."})]})]})})]})},A=({icon:k,title:m,value:z,color:p,subValue:E,trend:b,bgGradient:G})=>e.jsxs(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:`${G||"bg-gradient-to-br from-slate-800/50 to-slate-900/50 dark:from-slate-800/50 dark:to-slate-900/50 light:from-white/80 light:to-slate-50/80"} backdrop-blur-lg rounded-2xl p-6 border border-white/10 dark:border-white/10 light:border-slate-300/30 hover:border-white/20 dark:hover:border-white/20 light:hover:border-slate-400/50 transition-all duration-300 hover:transform hover:scale-105 shadow-lg hover:shadow-xl group`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:`p-3 rounded-xl ${p} backdrop-blur-sm`,children:e.jsx(k,{className:"w-8 h-8 text-white drop-shadow-lg"})}),b&&e.jsxs("div",{className:`flex items-center space-x-1 px-2 py-1 rounded-full text-xs font-semibold ${b.isPositive?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"}`,children:[b.isPositive?"‚Üó":"‚Üò"," ",Math.abs(b.value),"%"]})]}),e.jsx("h3",{className:"text-3xl font-bold text-white dark:text-white light:text-slate-900 mb-2 tracking-tight group-hover:scale-110 transition-transform duration-300",children:z}),e.jsx("p",{className:"text-white/70 dark:text-white/70 light:text-slate-700 text-sm font-medium",children:m}),E&&e.jsx("p",{className:"text-white/50 dark:text-white/50 light:text-slate-600 text-xs mt-2 bg-white/5 dark:bg-white/5 light:bg-slate-800/10 rounded-lg px-2 py-1",children:E})]});export{He as default};
