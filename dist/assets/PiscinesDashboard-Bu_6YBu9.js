import{r as v,j as e,m as i}from"./animation-vendor-CTGg7XC5.js";import w from"./PiscineSection-DIqKlnJx.js";import{L as g,s as f,a as P,C as r,b}from"./index-B61jjRdg.js";import{B as l}from"./ui-vendor-EbFLDUo2.js";import{d as k,e as C}from"./apollo-vendor-Dxrk3Lr4.js";import"./react-vendor-Csw2ODfV.js";const q=({user:o,piscineTypes:d})=>{const[a,x]=v.useState(""),{data:u,loading:y}=k(C`
    query GetAllPiscineXP($userId: Int!) {
      transaction(
        where: {
          userId: { _eq: $userId }
          type: { _eq: "xp" }
          _or: [
            { path: { _like: "/bahrain/bh-piscine/%" } }
            { path: { _like: "/bahrain/bh-module/piscine-%" } }
          ]
        }
        order_by: { createdAt: desc }
      ) {
        id
        amount
        path
        createdAt
        object {
          name
          type
        }
      }
    }
  `,{variables:{userId:o.id},errorPolicy:"all"});if(y)return e.jsx(g,{});const n=u?.transaction||[];f(n);const h=P(n),m=(t=>{const s=new Set;return t.forEach(N=>{const p=N.path;p.includes("/bahrain/bh-piscine/")&&s.add("go");const j=p.match(/\/bahrain\/bh-module\/piscine-([^\/]+)\//);j&&s.add(j[1])}),Array.from(s)})(n),c=m.length>0?m:d;return c.length===0?e.jsxs("div",{className:"space-y-8",children:[e.jsxs(i.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-center",children:[e.jsx("h1",{className:"text-4xl font-bold text-white mb-2",children:"Piscines Dashboard"}),e.jsx("p",{className:"text-white/70 text-lg",children:"Your piscine learning journey and achievements"})]}),e.jsx(r,{className:"p-8 text-center",children:e.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[e.jsx(l,{className:"w-16 h-16 text-white/30"}),e.jsx("h3",{className:"text-xl font-semibold text-white",children:"No Piscines Found"}),e.jsx("p",{className:"text-white/60",children:"You haven't started any piscines yet. Piscines will appear here once you begin your learning journey."})]})})]}):e.jsxs("div",{className:"space-y-8",children:[e.jsxs(i.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-center",children:[e.jsx("h1",{className:"text-4xl font-bold text-white mb-2",children:"Piscines Dashboard"}),e.jsx("p",{className:"text-white/70 text-lg",children:"Your piscine learning journey and achievements"})]}),e.jsx(i.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1},children:e.jsx("nav",{className:"bg-white/5 backdrop-blur-sm border border-white/10 rounded-lg p-2",children:e.jsx("div",{className:"flex space-x-2 overflow-x-auto scrollbar-hide",children:c.map(t=>e.jsxs(i.button,{onClick:()=>x(t),whileHover:{y:-2},whileTap:{y:0},className:`flex items-center px-4 py-3 text-sm font-medium rounded-lg transition-all whitespace-nowrap ${a===t?"bg-primary-500/20 text-primary-400 border border-primary-500/30":"text-white/70 hover:text-white hover:bg-white/10"}`,children:[e.jsx(l,{className:"w-4 h-4 mr-2"}),"Piscine ",t.toUpperCase()]},t))})})}),e.jsx(i.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:a?e.jsx(w,{user:o,piscineType:a}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-6",children:"Piscines Overview"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:c.map(t=>{const s=h.piscines[t]||0;return e.jsx(r,{className:"p-6 cursor-pointer hover:bg-white/5 transition-colors",onClick:()=>x(t),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-white/60 text-sm font-medium",children:["Piscine ",t.toUpperCase()]}),e.jsx("p",{className:"text-3xl font-bold text-primary-400",children:b(s)}),e.jsx("p",{className:"text-white/50 text-xs mt-1",children:"Click to view details"})]}),e.jsx("div",{className:"w-12 h-12 bg-primary-500/20 rounded-lg flex items-center justify-center",children:e.jsx(l,{className:"w-6 h-6 text-primary-400"})})]})},t)})}),e.jsxs(r,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Total Piscine Statistics"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-green-400 mb-2",children:b(h.allPiscines)}),e.jsx("div",{className:"text-white/60 text-sm",children:"Total Piscine XP"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-blue-400 mb-2",children:d.length}),e.jsx("div",{className:"text-white/60 text-sm",children:"Piscines Started"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-yellow-400 mb-2",children:n.length}),e.jsx("div",{className:"text-white/60 text-sm",children:"Total Achievements"})]})]})]})]})},a)]})};export{q as default};
