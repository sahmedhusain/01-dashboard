import{j as e,m as a,r as N}from"./animation-vendor-BWQ_wUI_.js";import w from"./PiscineSection-BfBiwB0m.js";import{C as h}from"./Card-7ZsQEDVb.js";import{f as u,L as f,s as g,c as P}from"./index-ChUwEoWz.js";import{B as m}from"./ui-vendor-BBc5DWUb.js";import{d as S,e as k}from"./apollo-vendor-8AJvV5pX.js";import"./react-vendor-DJG_os-6.js";const C=({piscineTypes:n,xpTotals:c,transactions:t,onSelectPiscine:r})=>e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-6",children:"Piscines Overview"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map(s=>{const o=c.piscines[s]||0;return e.jsx(a.div,{whileHover:{y:-5},className:"cursor-pointer",onClick:()=>r(s),children:e.jsx(h,{className:"p-6 h-full bg-white/5 hover:bg-white/10 transition-colors",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-white/60 text-sm font-medium",children:["Piscine ",s.toUpperCase()]}),e.jsx("p",{className:"text-3xl font-bold text-primary-400",children:u(o)}),e.jsx("p",{className:"text-white/50 text-xs mt-1",children:"Click to view details"})]}),e.jsx("div",{className:"w-12 h-12 bg-primary-500/20 rounded-lg flex items-center justify-center",children:e.jsx(m,{className:"w-6 h-6 text-primary-400"})})]})})},s)})}),e.jsxs(h,{className:"p-6 bg-white/5",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Total Piscine Statistics"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-green-400 mb-2",children:u(c.allPiscines)}),e.jsx("div",{className:"text-white/60 text-sm",children:"Total Piscine XP"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-blue-400 mb-2",children:n.length}),e.jsx("div",{className:"text-white/60 text-sm",children:"Piscines Started"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-yellow-400 mb-2",children:t.length}),e.jsx("div",{className:"text-white/60 text-sm",children:"Total Achievements"})]})]})]})]}),E=({user:n,piscineTypes:c})=>{const[t,r]=N.useState(""),{data:s,loading:o}=S(k`
    query GetAllPiscineXP($userId: Int!) {
      transaction(
        where: {
          userId: { _eq: $userId }
          type: { _eq: "xp" }
          _or: [
            { path: { _like: "/bahrain/bh-piscine/%" } }
            { path: { _like: "/bahrain/bh-module/piscine-%" } }
          ]
        }
        order_by: { createdAt: desc }
      ) {
        id
        amount
        path
        createdAt
        object {
          name
          type
        }
      }
    }
  `,{variables:{userId:n.id},errorPolicy:"all"});if(o)return e.jsx(f,{});const l=s?.transaction||[];g(l);const y=P(l),p=(i=>{const x=new Set;return i.forEach(v=>{const j=v.path;j.includes("/bahrain/bh-piscine/")&&x.add("go");const b=j.match(/\/bahrain\/bh-module\/piscine-([^\/]+)\//);b&&x.add(b[1])}),Array.from(x)})(l),d=p.length>0?p:c;return d.length===0?e.jsxs("div",{className:"space-y-8",children:[e.jsxs(a.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-center",children:[e.jsx("h1",{className:"text-4xl font-bold text-white mb-2",children:"Piscines Dashboard"}),e.jsx("p",{className:"text-white/70 text-lg",children:"Your piscine learning journey and achievements"})]}),e.jsx(h,{className:"p-8 text-center",children:e.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[e.jsx(m,{className:"w-16 h-16 text-white/30"}),e.jsx("h3",{className:"text-xl font-semibold text-white",children:"No Piscines Found"}),e.jsx("p",{className:"text-white/60",children:"You haven't started any piscines yet. Piscines will appear here once you begin your learning journey."})]})})]}):e.jsxs("div",{className:"space-y-8",children:[e.jsxs(a.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-center",children:[e.jsx("h1",{className:"text-4xl font-bold text-white mb-2",children:"Piscines Dashboard"}),e.jsx("p",{className:"text-white/70 text-lg",children:"Your piscine learning journey and achievements"})]}),e.jsx(a.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1},children:e.jsx("nav",{className:"bg-white/5 backdrop-blur-sm border border-white/10 rounded-lg p-2",children:e.jsx("div",{className:"flex space-x-2 overflow-x-auto scrollbar-hide",children:d.map(i=>e.jsxs(a.button,{onClick:()=>r(i),whileHover:{y:-2},whileTap:{y:0},className:`flex items-center px-4 py-3 text-sm font-medium rounded-lg transition-all whitespace-nowrap ${t===i?"bg-primary-500/20 text-primary-400 border border-primary-500/30":"text-white/70 hover:text-white hover:bg-white/10"}`,children:[e.jsx(m,{className:"w-4 h-4 mr-2"}),"Piscine ",i.toUpperCase()]},i))})})}),e.jsx(a.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:t?e.jsx(w,{user:n,piscineType:t}):e.jsx(C,{piscineTypes:d,xpTotals:y,transactions:l,onSelectPiscine:r})},t)]})};export{E as default};
