import{r as w,j as e,m as s,A as be}from"./animation-vendor-BWQ_wUI_.js";import{R as je,b as se,u as ye,k as fe}from"./index-vi_F3HyY.js";import{C as ae}from"./Card-CpLpOsAi.js";import{ae as re,af as K,Z as ie,R as H,S as Q,O as le,v as ce,u as de,d as W,N as we,x as ve,ag as Ne,ah as Se,ai as Ae,aj as _e,ak as Ee,F as Te,D as Ce,U as ne,aa as V,e as Re,r as $e,A as Oe,a as oe}from"./ui-vendor-AVDewks7.js";import{d as ke,i as _,e as N}from"./apollo-vendor-8AJvV5pX.js";import"./react-vendor-DJG_os-6.js";const Pe=()=>{const l=w.useContext(je);if(l===void 0)throw new Error("useRefresh must be used within a RefreshProvider");return l},De=({className:l="",showStats:E=!0,showAutoRefreshToggle:S=!0,compact:x=!1})=>{const{isGlobalRefreshing:o,refreshStats:h,refreshAll:j,hardRefresh:v,enableAutoRefresh:n,disableAutoRefresh:O,isAutoRefreshEnabled:A,autoRefreshInterval:m,clearCache:q,getCacheSize:p,isOnline:T,lastOnlineTime:C}=Pe(),[P,R]=w.useState(!1),[k,X]=w.useState(Math.round(m/1e3)),y=()=>{A?O():n(k*1e3)},z=d=>{X(d),A&&n(d*1e3)},M=d=>d<1e3?`${d}ms`:d<6e4?`${(d/1e3).toFixed(1)}s`:`${(d/6e4).toFixed(1)}m`,D=d=>{const I=Math.round(d/1e3);if(I<60)return`${I}s`;const L=Math.round(I/60);return L<60?`${L}m`:`${Math.round(L/60)}h`};return x?e.jsxs("div",{className:`flex items-center space-x-2 ${l}`,children:[e.jsx("div",{className:"flex items-center",children:T?e.jsx(re,{className:"w-4 h-4 text-green-400"}):e.jsx(K,{className:"w-4 h-4 text-red-400"})}),A&&e.jsxs("div",{className:"flex items-center text-xs text-primary-400",children:[e.jsx(ie,{className:"w-3 h-3 mr-1"}),D(m)]}),e.jsx(s.button,{onClick:j,disabled:o,whileHover:{scale:1.05},whileTap:{scale:.95},className:`p-2 rounded-lg transition-all ${o?"bg-primary-500/20 text-primary-400 cursor-wait":"bg-white/10 text-white/70 hover:bg-white/20 hover:text-white"}`,children:e.jsx(H,{className:`w-4 h-4 ${o?"animate-spin":""}`})})]}):e.jsxs("div",{className:`bg-white/10 backdrop-blur-lg rounded-xl p-4 border border-white/20 ${l}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-primary-500/20",children:e.jsx(H,{className:"w-5 h-5 text-primary-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-white font-medium",children:"Data Refresh"}),e.jsxs("p",{className:"text-white/60 text-sm",children:[T?"Online":"Offline"," â€¢",A?` Auto: ${D(m)}`:" Manual"]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:`p-2 rounded-lg ${T?"bg-green-500/20":"bg-red-500/20"}`,children:T?e.jsx(re,{className:"w-4 h-4 text-green-400"}):e.jsx(K,{className:"w-4 h-4 text-red-400"})}),e.jsx(s.button,{onClick:()=>R(!P),whileHover:{scale:1.05},whileTap:{scale:.95},className:`p-2 rounded-lg transition-all ${P?"bg-primary-500/20 text-primary-400":"bg-white/10 text-white/70 hover:bg-white/20"}`,children:e.jsx(Q,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 mb-4",children:[e.jsxs(s.button,{onClick:j,disabled:o,whileHover:{scale:1.02},whileTap:{scale:.98},className:`p-3 rounded-lg border transition-all text-left ${o?"bg-primary-500/20 border-primary-500/30 text-primary-400 cursor-wait":"bg-white/5 border-white/10 text-white hover:bg-white/10"}`,children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx(H,{className:`w-4 h-4 ${o?"animate-spin":""}`}),e.jsx("span",{className:"font-medium",children:"Refresh All"})]}),e.jsx("p",{className:"text-xs text-white/60",children:o?"Refreshing...":"Update all data"})]}),e.jsxs(s.button,{onClick:v,disabled:o,whileHover:{scale:1.02},whileTap:{scale:.98},className:"p-3 rounded-lg border bg-white/5 border-white/10 text-white hover:bg-white/10 transition-all text-left disabled:opacity-50",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx(le,{className:"w-4 h-4"}),e.jsx("span",{className:"font-medium",children:"Hard Refresh"})]}),e.jsx("p",{className:"text-xs text-white/60",children:"Clear cache & refresh"})]}),S&&e.jsxs(s.button,{onClick:y,whileHover:{scale:1.02},whileTap:{scale:.98},className:`p-3 rounded-lg border transition-all text-left ${A?"bg-green-500/20 border-green-500/30 text-green-400":"bg-white/5 border-white/10 text-white hover:bg-white/10"}`,children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx(ie,{className:"w-4 h-4"}),e.jsx("span",{className:"font-medium",children:"Auto Refresh"})]}),e.jsx("p",{className:"text-xs text-white/60",children:A?`Every ${D(m)}`:"Disabled"})]})]}),e.jsx(be,{children:P&&e.jsxs(s.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"border-t border-white/10 pt-4",children:[e.jsxs("h4",{className:"text-white font-medium mb-3 flex items-center",children:[e.jsx(Q,{className:"w-4 h-4 mr-2"}),"Refresh Settings"]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-white/80 text-sm mb-2",children:"Auto-refresh Interval"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"range",min:"10",max:"300",step:"10",value:k,onChange:d=>z(Number(d.target.value)),className:"flex-1 h-2 bg-white/20 rounded-lg appearance-none cursor-pointer"}),e.jsxs("span",{className:"text-white/70 text-sm w-12",children:[k,"s"]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-white/80 text-sm",children:"Cache Size"}),e.jsxs("p",{className:"text-white/60 text-xs",children:[p()," entries"]})]}),e.jsx(s.button,{onClick:q,whileHover:{scale:1.05},whileTap:{scale:.95},className:"px-3 py-1 bg-red-500/20 text-red-400 rounded-lg text-sm hover:bg-red-500/30 transition-all",children:"Clear Cache"})]})]})}),E&&e.jsxs("div",{className:"border-t border-white/10 pt-4 mt-4",children:[e.jsxs("h4",{className:"text-white font-medium mb-3 flex items-center",children:[e.jsx(ce,{className:"w-4 h-4 mr-2"}),"Refresh Statistics"]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"flex items-center justify-center mb-1",children:e.jsx(de,{className:"w-4 h-4 text-blue-400"})}),e.jsx("p",{className:"text-lg font-bold text-white",children:h.totalRefreshes}),e.jsx("p",{className:"text-xs text-white/60",children:"Total"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"flex items-center justify-center mb-1",children:e.jsx(W,{className:"w-4 h-4 text-green-400"})}),e.jsx("p",{className:"text-lg font-bold text-white",children:h.successfulRefreshes}),e.jsx("p",{className:"text-xs text-white/60",children:"Success"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"flex items-center justify-center mb-1",children:e.jsx(we,{className:"w-4 h-4 text-red-400"})}),e.jsx("p",{className:"text-lg font-bold text-white",children:h.failedRefreshes}),e.jsx("p",{className:"text-xs text-white/60",children:"Failed"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"flex items-center justify-center mb-1",children:e.jsx(ve,{className:"w-4 h-4 text-purple-400"})}),e.jsx("p",{className:"text-lg font-bold text-white",children:M(h.averageRefreshTime)}),e.jsx("p",{className:"text-xs text-white/60",children:"Avg Time"})]})]}),h.lastRefreshTime&&e.jsx("div",{className:"mt-3 text-center",children:e.jsxs("p",{className:"text-white/60 text-xs",children:["Last refresh: ",se(h.lastRefreshTime)]})}),!T&&C&&e.jsx("div",{className:"mt-3 text-center",children:e.jsxs("p",{className:"text-red-400 text-xs flex items-center justify-center",children:[e.jsx(K,{className:"w-3 h-3 mr-1"}),"Last online: ",se(C)]})})]})]})},Ie=N`
  query Users {
    event_user(
      order_by: { createdAt: desc }
      where: { 
        event: { 
          path: { _like: "/bahrain%" }
        },
      }
    ) {
      userLogin
      userName
      createdAt
      userAuditRatio
      level
      event {
        campus
      }
    }
  }
`,Le=N`
  query GetAllObjectsExport {
    object(order_by: { createdAt: desc }) {
      id
      name
      type
      attrs
      createdAt
      campus
      authorId
    }
  }
`,Ue=N`
  query GetAllEventsExport {
    event(order_by: { createdAt: desc }) {
      id
      path
      campus
      createdAt
      endAt
      objectId
    }
  }
`,Ge=N`
  query GetAllGroupsExport {
    group(order_by: { createdAt: desc }) {
      id
      path
      campus
      createdAt
      updatedAt
      objectId
      eventId
    }
  }
`,Fe=N`
  query GetAllTransactionsExport {
    transaction(order_by: { createdAt: desc }) {
      id
      type
      amount
      createdAt
      path
      userId
      objectId
      eventId
      campus
    }
  }
`,He=N`
  query GetAllProgressExport {
    progress(order_by: { createdAt: desc }) {
      id
      userId
      objectId
      grade
      path
      campus
      createdAt
      isDone
    }
  }
`,qe=N`
  query GetAllAuditsExport {
    audit(order_by: { createdAt: desc }) {
      id
      auditorId
      groupId
      grade
      createdAt
      updatedAt
    }
  }
`,Xe=N`
  query GetAllResultsExport {
    result(order_by: { createdAt: desc }) {
      id
      userId
      objectId
      grade
      type
      path
      createdAt
    }
  }
`,ze=N`
  query GetExportStats {
    event_user_aggregate(
      where: { 
        event: { 
          path: { _like: "/bahrain%" }
        }
      }
    ) { aggregate { count } }
    object_aggregate { aggregate { count } }
    event_aggregate { aggregate { count } }
    group_aggregate { aggregate { count } }
    transaction_aggregate { aggregate { count } }
    progress_aggregate { aggregate { count } }
    audit_aggregate { aggregate { count } }
    result_aggregate { aggregate { count } }
  }
`,F={dashboard:{defaultTab:"dashboard",tabOrder:["dashboard","piscines","leaderboard","groups","audits","checkpoints","events","subjects"]}},Me=(l,E)=>{const S=new TextEncoder,x=S.encode(l),o=S.encode(E),h=new Uint8Array(x.length);for(let n=0;n<x.length;n++)h[n]=o[n%o.length];const j=new Uint8Array(x.length);for(let n=0;n<x.length;n++)j[n]=x[n]^h[n];let v="";for(let n=0;n<j.length;n++)v+=String.fromCharCode(j[n]);return btoa(v)},Be=(l,E,S,x)=>{const o=Me(l,E),h=new Date().toISOString();return JSON.stringify({_encrypted:!0,_format:S,_dataType:x,_timestamp:h,_instructions:{message:"This file is password protected. Use the decryption tool with your credentials.",decryption:"To decrypt: 1) Use your credential 2) Apply XOR decryption with base64 encoding 3) Parse the resulting content"},_encryptedData:o},null,2)},Ye=({userId:l,onClose:E,defaultTabs:S=[]})=>{const[x,o]=w.useState(F),[h,j]=w.useState(!1),[v,n]=w.useState("appearance"),[O,A]=w.useState({}),[m,q]=w.useState("users"),[p,T]=w.useState("json"),[C,P]=w.useState(!0),{user:R}=ye(),{theme:k,setTheme:X}=fe();w.useEffect(()=>{const t=localStorage.getItem(`user-preferences-${l}`);if(t)try{const a=JSON.parse(t);o({...F,...a})}catch{}},[l]);const{data:y}=ke(ze,{errorPolicy:"all",fetchPolicy:"cache-first"}),[z]=_(Ie,{errorPolicy:"all"}),[M]=_(Le,{errorPolicy:"all"}),[D]=_(Ue,{errorPolicy:"all"}),[d]=_(Ge,{errorPolicy:"all"}),[I]=_(Fe,{errorPolicy:"all"}),[L]=_(He,{errorPolicy:"all"}),[Z]=_(qe,{errorPolicy:"all"}),[xe]=_(Xe,{errorPolicy:"all"}),B=(t,a,r)=>{o(i=>({...i,[t]:{...i[t],[a]:r}})),j(!0)},he=()=>{localStorage.setItem(`user-preferences-${l}`,JSON.stringify(x)),j(!1)},me=()=>{o(F),j(!0)},Y=(t,a)=>{const r=[...x.dashboard.tabOrder],[i]=r.splice(t,1);r.splice(a,0,i),B("dashboard","tabOrder",r)},pe=()=>{B("dashboard","tabOrder",F.dashboard.tabOrder)},U=(t,a)=>{A(r=>({...r,[t]:a}))},ee=(t,a,r)=>{if(!t||t.length===0)return"";const i=C?{metadata:{exportedAt:new Date().toISOString(),dataType:a,format:r,recordCount:t.length,exportedBy:l},data:t}:t;switch(r){case"json":return JSON.stringify(i,null,2);case"csv":{if(t.length===0)return"";const c=Object.keys(t[0]).join(","),u=t.map(f=>Object.values(f).map(g=>typeof g=="string"&&g.includes(",")?`"${g.replace(/"/g,'""')}"`:g).join(","));return C?`# Exported on ${new Date().toISOString()}
# Data type: ${a}
# Records: ${t.length}
${c}
${u.join(`
`)}`:`${c}
${u.join(`
`)}`}case"txt":{const c=t.map(u=>Object.entries(u).map(([f,g])=>`${f}: ${g}`).join(`
`)).join(`
---
`);return C?`Export Date: ${new Date().toISOString()}
Data Type: ${a}
Total Records: ${t.length}
Exported By: User ${l}

---
${c}`:c}default:return JSON.stringify(i,null,2)}},te=(t,a,r,i)=>{if(!R?.login)return;const c=Be(t,R.login,r,i),u={json:"application/json",csv:"text/csv",txt:"text/plain"},f={json:"protected.json",csv:"protected.csv",txt:"protected.txt"},g=u[r],b=f[r],J=new Blob([c],{type:g}),G=URL.createObjectURL(J),$=document.createElement("a");$.href=G,$.download=`${a}.${b}`,document.body.appendChild($),$.click(),document.body.removeChild($),URL.revokeObjectURL(G)},ue=async t=>{const a=`${t}-${p}`;U(a,"loading");try{const r={users:z,objects:M,events:D,groups:d,transactions:I,progress:L,audits:Z,results:xe};if(t==="all"){const i=Object.entries(r).map(async([b,J])=>{const G=await J(),$=b==="users"?"event_user":b==="objects"?"object":b==="events"?"event":b==="groups"?"group":b==="transactions"?"transaction":b==="progress"?"progress":b==="audits"?"audit":"result";return{[b]:G.data?.[$]||[]}}),c=await Promise.all(i),u=Object.assign({},...c),f=ee([u],"all",p),g=new Date().toISOString().split("T")[0];te(f,`reboot01_all_data_${g}`,p,"all")}else{const i=r[t],c=await i(),u=t==="users"?"event_user":t==="objects"?"object":t==="events"?"event":t==="groups"?"group":t==="transactions"?"transaction":t==="progress"?"progress":t==="audits"?"audit":"result",f=c.data?.[u]||[],g=ee(f,t,p),b=new Date().toISOString().split("T")[0];te(g,`reboot01_${t}_${b}`,p,t)}U(a,"success"),setTimeout(()=>U(a,"idle"),3e3)}catch{U(a,"error"),setTimeout(()=>U(a,"idle"),5e3)}},ge=[{id:"appearance",label:"Appearance",icon:Se},{id:"dashboard",label:"Dashboard",icon:Q},{id:"data",label:"Data Refresh",icon:le},{id:"export",label:"Data Export",icon:Ae}];return e.jsx(s.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2,ease:"easeInOut"},className:"fixed inset-0 bg-gradient-to-br from-black/60 via-black/50 to-black/60 backdrop-blur-md z-50 flex items-center justify-center p-4",children:e.jsxs(s.div,{initial:{opacity:0,scale:.85,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.85,y:20},transition:{duration:.3,ease:[.16,1,.3,1],staggerChildren:.05},className:"bg-gradient-to-br from-gray-900/95 via-gray-800/95 to-gray-900/95 backdrop-blur-xl rounded-2xl shadow-2xl border border-white/10 w-full max-w-4xl max-h-[90vh] overflow-hidden",style:{boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.5), 0 0 0 1px rgba(255, 255, 255, 0.05), inset 0 1px 0 rgba(255, 255, 255, 0.1)"},children:[e.jsxs(s.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{delay:.1,duration:.3},className:"p-8 border-b border-gradient-to-r from-transparent via-white/10 to-transparent relative",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/5 to-transparent"}),e.jsxs("div",{className:"relative flex items-center justify-between",children:[e.jsxs(s.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.15,duration:.4},children:[e.jsx("h2",{className:"text-3xl font-bold bg-gradient-to-r from-white via-white/90 to-white/80 bg-clip-text text-transparent mb-2",children:"User Preferences"}),e.jsx("p",{className:"text-white/60 text-sm font-medium tracking-wide",children:"Customize your dashboard experience and data settings"})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[h&&e.jsxs(s.button,{initial:{opacity:0,scale:.8,x:20},animate:{opacity:1,scale:1,x:0},exit:{opacity:0,scale:.8,x:20},whileHover:{scale:1.02,y:-1},whileTap:{scale:.98},transition:{duration:.2},onClick:he,className:"flex items-center px-6 py-2.5 bg-gradient-to-r from-primary-600 to-primary-500 hover:from-primary-500 hover:to-primary-400 text-white rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 font-medium",children:[e.jsx(Ne,{className:"w-4 h-4 mr-2"}),"Save Changes"]}),e.jsx(s.button,{whileHover:{scale:1.1,rotate:90},whileTap:{scale:.9},transition:{duration:.2},onClick:E,className:"w-10 h-10 flex items-center justify-center rounded-full bg-white/5 hover:bg-white/10 text-white/60 hover:text-white transition-all duration-300 backdrop-blur-sm border border-white/10",children:e.jsx("span",{className:"text-lg font-light",children:"âœ•"})})]})]})]}),e.jsxs("div",{className:"flex h-[600px]",children:[e.jsxs(s.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.2,duration:.4},className:"w-64 bg-gradient-to-b from-gray-900/60 to-gray-900/40 backdrop-blur-sm border-r border-white/10 p-6",children:[e.jsx("nav",{className:"space-y-3",children:ge.map((t,a)=>{const r=t.icon,i=v===t.id;return e.jsxs(s.button,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:.25+a*.05,duration:.3},onClick:()=>n(t.id),whileHover:{x:4,scale:1.02},whileTap:{scale:.98},className:`w-full flex items-center px-4 py-3.5 rounded-xl text-left transition-all duration-300 relative overflow-hidden group ${i?"bg-gradient-to-r from-primary-500/20 to-primary-600/10 text-white shadow-lg border border-primary-500/30":"text-white/70 hover:text-white hover:bg-white/10 border border-transparent hover:border-white/10"}`,children:[i&&e.jsx(s.div,{layoutId:"activeTab",className:"absolute inset-0 bg-gradient-to-r from-primary-500/10 to-primary-600/5 rounded-xl",transition:{type:"spring",bounce:.2,duration:.6}}),e.jsxs("div",{className:"relative z-10 flex items-center",children:[e.jsx(r,{className:`w-5 h-5 mr-3 transition-all duration-300 ${i?"text-primary-300 scale-110":"text-white/60 group-hover:text-white group-hover:scale-105"}`}),e.jsx("span",{className:"font-medium text-sm",children:t.label})]}),i&&e.jsx(s.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},className:"absolute right-3 top-1/2 -translate-y-1/2 w-2 h-2 bg-primary-400 rounded-full shadow-lg shadow-primary-400/50"})]},t.id)})}),e.jsx(s.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4,duration:.3},className:"mt-8 pt-6 border-t border-white/10",children:e.jsxs(s.button,{whileHover:{x:4,scale:1.02},whileTap:{scale:.98},onClick:me,className:"w-full flex items-center px-4 py-3 text-white/60 hover:text-white hover:bg-white/10 rounded-xl transition-all duration-300 border border-transparent hover:border-white/10 group",children:[e.jsx(_e,{className:"w-4 h-4 mr-3 text-white/40 group-hover:text-white/70 group-hover:rotate-12 transition-all duration-300"}),e.jsx("span",{className:"font-medium text-sm",children:"Reset to Defaults"})]})})]}),e.jsxs(s.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.3,duration:.4},className:"flex-1 p-8 overflow-y-auto",children:[v==="appearance"&&e.jsxs(s.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},className:"space-y-8",children:[e.jsxs(s.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.1,duration:.3},children:[e.jsx("h3",{className:"text-2xl font-bold text-white mb-2",children:"Appearance Settings"}),e.jsx("p",{className:"text-white/60 text-sm",children:"Customize the visual theme of your dashboard"})]}),e.jsx(s.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2,duration:.3},children:e.jsxs(ae,{className:"p-6 bg-white/5 backdrop-blur-sm border border-white/10 rounded-xl",children:[e.jsx("label",{className:"block text-white font-semibold mb-4",children:"Theme Selection"}),e.jsx("div",{className:"space-y-3",children:["dark","light","auto"].map((t,a)=>e.jsxs(s.label,{className:"flex items-center p-3 rounded-lg hover:bg-white/5 transition-all duration-200 cursor-pointer group",whileHover:{x:4},initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:.3+a*.1,duration:.3},children:[e.jsx("input",{type:"radio",name:"theme",value:t,checked:k===t,onChange:r=>X(r.target.value),className:"mr-4 w-4 h-4 text-primary-500 bg-gray-700 border-gray-600 focus:ring-primary-500 focus:ring-2"}),e.jsx("span",{className:"text-white/80 capitalize font-medium group-hover:text-white transition-colors duration-200",children:t}),k===t&&e.jsx(s.div,{layoutId:"themeIndicator",className:"ml-auto w-2 h-2 bg-primary-400 rounded-full shadow-lg shadow-primary-400/50"})]},t))})]})})]},"appearance"),v==="dashboard"&&e.jsxs(s.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},className:"space-y-8",children:[e.jsxs(s.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.1,duration:.3},children:[e.jsx("h3",{className:"text-2xl font-bold text-white mb-2",children:"Dashboard Settings"}),e.jsx("p",{className:"text-white/60 text-sm",children:"Configure your dashboard layout and default views"})]}),e.jsx(ae,{className:"p-4",children:e.jsx("div",{className:"space-y-4",children:Object.entries(x.dashboard).map(([t,a])=>t==="defaultTab"?e.jsxs("div",{children:[e.jsx("label",{className:"block text-white/80 mb-2",children:"Default Tab"}),e.jsxs("select",{value:a,onChange:r=>B("dashboard",t,r.target.value),className:"w-full bg-gray-700 text-white rounded px-3 py-2",children:[e.jsx("option",{value:"dashboard",children:"Dashboard"}),e.jsx("option",{value:"piscines",children:"Piscines"}),e.jsx("option",{value:"leaderboard",children:"Leaderboard"}),e.jsx("option",{value:"groups",children:"Groups"}),e.jsx("option",{value:"audits",children:"Audits"}),e.jsx("option",{value:"checkpoints",children:"Checkpoints"}),e.jsx("option",{value:"events",children:"Events"}),e.jsx("option",{value:"subjects",children:"Subjects"})]})]},t):t==="tabOrder"?e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("label",{className:"block text-white/80",children:"Tab Order"}),e.jsx("button",{onClick:pe,className:"text-xs text-blue-400 hover:text-blue-300 transition-colors",children:"Reset to Default"})]}),e.jsx("div",{className:"space-y-2",children:a.map((r,i)=>{const c=S.find(f=>f.id===r);if(!c)return null;const u=c.icon;return e.jsxs("div",{className:"flex items-center bg-gray-700/50 rounded px-3 py-2",children:[e.jsx(Ee,{className:"w-4 h-4 text-white/40 mr-2"}),e.jsx(u,{className:"w-4 h-4 text-white/60 mr-2"}),e.jsx("span",{className:"text-white/80 flex-1",children:c.label}),e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("button",{onClick:()=>i>0&&Y(i,i-1),disabled:i===0,className:"p-1 text-white/40 hover:text-white/60 disabled:opacity-30 disabled:cursor-not-allowed",children:e.jsx(Te,{className:"w-3 h-3"})}),e.jsx("button",{onClick:()=>i<a.length-1&&Y(i,i+1),disabled:i===a.length-1,className:"p-1 text-white/40 hover:text-white/60 disabled:opacity-30 disabled:cursor-not-allowed",children:e.jsx(Ce,{className:"w-3 h-3"})})]})]},r)})})]},t):null)})})]},"dashboard"),v==="data"&&e.jsxs(s.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},className:"space-y-8",children:[e.jsxs(s.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.1,duration:.3},children:[e.jsx("h3",{className:"text-2xl font-bold text-white mb-2",children:"Data Refresh Settings"}),e.jsx("p",{className:"text-white/60 text-sm",children:"Manage data synchronization and caching options"})]}),e.jsxs("div",{className:"bg-white/5 rounded-lg p-4 border border-white/10",children:[e.jsx("p",{className:"text-white/70 text-sm mb-4",children:"Manage data refresh settings, cache, and synchronization options."}),e.jsx(De,{showStats:!0,showAutoRefreshToggle:!0})]})]},"data"),v==="export"&&e.jsxs(s.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},className:"space-y-8",children:[e.jsxs(s.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.1,duration:.3},children:[e.jsx("h3",{className:"text-2xl font-bold text-white mb-2",children:"Data Export"}),e.jsx("p",{className:"text-white/60 text-sm",children:"Export comprehensive data from the platform in various formats"})]}),y&&e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[{icon:ne,label:"Users",count:y.event_user_aggregate?.aggregate?.count||0,color:"bg-blue-500/20 text-blue-400"},{icon:V,label:"Objects",count:y.object_aggregate?.aggregate?.count||0,color:"bg-green-500/20 text-green-400"},{icon:Re,label:"Events",count:y.event_aggregate?.aggregate?.count||0,color:"bg-orange-500/20 text-orange-400"},{icon:ne,label:"Groups",count:y.group_aggregate?.aggregate?.count||0,color:"bg-purple-500/20 text-purple-400"},{icon:de,label:"Transactions",count:y.transaction_aggregate?.aggregate?.count||0,color:"bg-indigo-500/20 text-indigo-400"},{icon:$e,label:"Progress",count:y.progress_aggregate?.aggregate?.count||0,color:"bg-pink-500/20 text-pink-400"},{icon:W,label:"Audits",count:y.audit_aggregate?.aggregate?.count||0,color:"bg-yellow-500/20 text-yellow-400"},{icon:Oe,label:"Results",count:y.result_aggregate?.aggregate?.count||0,color:"bg-red-500/20 text-red-400"}].map(({icon:t,label:a,count:r,color:i})=>e.jsxs("div",{className:`${i} rounded-lg p-3 border border-current border-opacity-30`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(t,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:a})]}),e.jsx("div",{className:"text-lg font-bold mt-1",children:r.toLocaleString()})]},a))}),e.jsxs("div",{className:"bg-white/5 rounded-lg p-6 border border-white/10 space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"block text-white/80 font-medium",children:"Data Type"}),e.jsxs("select",{value:m,onChange:t=>q(t.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white focus:outline-none focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"users",children:"Users"}),e.jsx("option",{value:"objects",children:"Objects"}),e.jsx("option",{value:"events",children:"Events"}),e.jsx("option",{value:"groups",children:"Groups"}),e.jsx("option",{value:"transactions",children:"Transactions"}),e.jsx("option",{value:"progress",children:"Progress"}),e.jsx("option",{value:"audits",children:"Audits"}),e.jsx("option",{value:"results",children:"Results"}),e.jsx("option",{value:"all",children:"All Data (Combined)"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"block text-white/80 font-medium",children:"Export Format"}),e.jsx("div",{className:"flex space-x-4",children:[{value:"json",label:"JSON",icon:V},{value:"csv",label:"CSV",icon:ce},{value:"txt",label:"TXT",icon:V}].map(({value:t,label:a,icon:r})=>e.jsxs("button",{onClick:()=>T(t),className:`flex items-center space-x-2 px-4 py-2 rounded-lg border transition-all ${p===t?"bg-primary-500/20 border-primary-500/30 text-primary-300":"bg-gray-700/50 border-gray-600/50 text-white/70 hover:bg-gray-700 hover:border-gray-600"}`,children:[e.jsx(r,{className:"w-4 h-4"}),e.jsx("span",{children:a})]},t))})]}),e.jsx("div",{className:"space-y-3",children:e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:C,onChange:t=>P(t.target.checked),className:"rounded border-gray-600 bg-gray-700 text-primary-500 focus:ring-primary-500"}),e.jsx("span",{className:"text-white/80",children:"Include metadata (export date, record count, etc.)"})]})}),e.jsxs("div",{className:"flex justify-between items-center pt-4 border-t border-white/10",children:[e.jsxs("div",{className:"text-sm text-white/60",children:[m==="all"?"Export all data types":`Export ${m} data`," as ",p.toLowerCase()]}),e.jsx(s.button,{whileHover:{scale:1.02,y:-1},whileTap:{scale:.98},onClick:()=>ue(m),disabled:O[`${m}-${p}`]==="loading"||!R?.login,className:"flex items-center space-x-3 px-8 py-3 bg-gradient-to-r from-primary-500 to-primary-600 hover:from-primary-400 hover:to-primary-500 disabled:from-gray-600 disabled:to-gray-700 disabled:cursor-not-allowed text-white rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 font-medium",title:R?.login?"Export data with password protection":"Export disabled: User login not available for password protection",children:O[`${m}-${p}`]==="loading"?e.jsxs(e.Fragment,{children:[e.jsx(s.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},children:e.jsx(H,{className:"w-5 h-5"})}),e.jsx("span",{children:"Exporting..."})]}):O[`${m}-${p}`]==="success"?e.jsxs(e.Fragment,{children:[e.jsx(s.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",bounce:.5},children:e.jsx(W,{className:"w-5 h-5 text-green-300"})}),e.jsx("span",{children:"Downloaded!"})]}):O[`${m}-${p}`]==="error"?e.jsx(e.Fragment,{children:e.jsx(s.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",bounce:.5},children:e.jsx("span",{className:"text-red-300",children:"Export Failed"})})}):e.jsxs(e.Fragment,{children:[e.jsx(oe,{className:"w-5 h-5"}),e.jsx("span",{children:"Export Secured"})]})})]})]}),e.jsx("div",{className:"bg-amber-500/10 border border-amber-500/20 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-5 h-5 bg-amber-500/20 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:e.jsx(oe,{className:"w-3 h-3 text-amber-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-amber-200 text-sm font-medium",children:"Security Protection"}),e.jsxs("div",{className:"text-amber-100/70 text-xs mt-2 space-y-1",children:[e.jsx("p",{children:"â€¢ All exported files are password-protected for security"}),e.jsxs("p",{children:["â€¢ Your login credential (",e.jsx("strong",{children:R?.login||"Not Available"}),") is used as the password"]}),e.jsx("p",{children:"â€¢ Files are encrypted and saved with .protected extension in your selected format"}),e.jsx("p",{children:"â€¢ Use decryption tools or contact support to access the data"})]})]})]})}),e.jsx("div",{className:"bg-blue-500/10 border border-blue-500/20 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-5 h-5 bg-blue-500/20 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:e.jsx("div",{className:"w-2 h-2 bg-blue-400 rounded-full"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-blue-200 text-sm font-medium",children:"Export Information"}),e.jsxs("div",{className:"text-blue-100/70 text-xs mt-2 space-y-1",children:[e.jsx("p",{children:"â€¢ Exports include all available fields and data for the selected type"}),e.jsx("p",{children:"â€¢ Large datasets may take some time to process"}),e.jsx("p",{children:"â€¢ All exports are generated fresh from the current database state"}),e.jsx("p",{children:"â€¢ Metadata includes export timestamp, record counts, and user information"})]})]})]})})]},"export")]})]})]})})};export{Ye as default};
