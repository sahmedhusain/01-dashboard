import{r as m,j as e,m as n,A as F}from"./animation-vendor-BWQ_wUI_.js";import{C as R}from"./Card-boLi8-L0.js";import{R as Z,b as T}from"./index-DIwVma_V.js";import{a1 as P,a2 as S,Z as D,R as $,S as k,W as E,u as L,s as U,g as W,Y as J,v as B,a3 as G,a4 as X,b as Y,a5 as q}from"./ui-vendor-BusGUpMC.js";import"./react-vendor-DJG_os-6.js";import"./apollo-vendor-8AJvV5pX.js";const K=()=>{const c=m.useContext(Z);if(c===void 0)throw new Error("useRefresh must be used within a RefreshProvider");return c},Q=({className:c="",showStats:b=!0,showAutoRefreshToggle:x=!0,compact:f=!1})=>{const{isGlobalRefreshing:i,refreshStats:l,refreshAll:h,hardRefresh:u,enableAutoRefresh:o,disableAutoRefresh:w,isAutoRefreshEnabled:d,autoRefreshInterval:p,clearCache:s,getCacheSize:t,isOnline:a,lastOnlineTime:j}=K(),[N,O]=m.useState(!1),[g,z]=m.useState(Math.round(p/1e3)),H=()=>{d?w():o(g*1e3)},I=r=>{z(r),d&&o(r*1e3)},M=r=>r<1e3?`${r}ms`:r<6e4?`${(r/1e3).toFixed(1)}s`:`${(r/6e4).toFixed(1)}m`,v=r=>{const y=Math.round(r/1e3);if(y<60)return`${y}s`;const C=Math.round(y/60);return C<60?`${C}m`:`${Math.round(C/60)}h`};return f?e.jsxs("div",{className:`flex items-center space-x-2 ${c}`,children:[e.jsx("div",{className:"flex items-center",children:a?e.jsx(P,{className:"w-4 h-4 text-green-400"}):e.jsx(S,{className:"w-4 h-4 text-red-400"})}),d&&e.jsxs("div",{className:"flex items-center text-xs text-primary-400",children:[e.jsx(D,{className:"w-3 h-3 mr-1"}),v(p)]}),e.jsx(n.button,{onClick:h,disabled:i,whileHover:{scale:1.05},whileTap:{scale:.95},className:`p-2 rounded-lg transition-all ${i?"bg-primary-500/20 text-primary-400 cursor-wait":"bg-white/10 text-white/70 hover:bg-white/20 hover:text-white"}`,children:e.jsx($,{className:`w-4 h-4 ${i?"animate-spin":""}`})})]}):e.jsxs("div",{className:`bg-white/10 backdrop-blur-lg rounded-xl p-4 border border-white/20 ${c}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-primary-500/20",children:e.jsx($,{className:"w-5 h-5 text-primary-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-white font-medium",children:"Data Refresh"}),e.jsxs("p",{className:"text-white/60 text-sm",children:[a?"Online":"Offline"," •",d?` Auto: ${v(p)}`:" Manual"]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:`p-2 rounded-lg ${a?"bg-green-500/20":"bg-red-500/20"}`,children:a?e.jsx(P,{className:"w-4 h-4 text-green-400"}):e.jsx(S,{className:"w-4 h-4 text-red-400"})}),e.jsx(n.button,{onClick:()=>O(!N),whileHover:{scale:1.05},whileTap:{scale:.95},className:`p-2 rounded-lg transition-all ${N?"bg-primary-500/20 text-primary-400":"bg-white/10 text-white/70 hover:bg-white/20"}`,children:e.jsx(k,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 mb-4",children:[e.jsxs(n.button,{onClick:h,disabled:i,whileHover:{scale:1.02},whileTap:{scale:.98},className:`p-3 rounded-lg border transition-all text-left ${i?"bg-primary-500/20 border-primary-500/30 text-primary-400 cursor-wait":"bg-white/5 border-white/10 text-white hover:bg-white/10"}`,children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx($,{className:`w-4 h-4 ${i?"animate-spin":""}`}),e.jsx("span",{className:"font-medium",children:"Refresh All"})]}),e.jsx("p",{className:"text-xs text-white/60",children:i?"Refreshing...":"Update all data"})]}),e.jsxs(n.button,{onClick:u,disabled:i,whileHover:{scale:1.02},whileTap:{scale:.98},className:"p-3 rounded-lg border bg-white/5 border-white/10 text-white hover:bg-white/10 transition-all text-left disabled:opacity-50",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx(E,{className:"w-4 h-4"}),e.jsx("span",{className:"font-medium",children:"Hard Refresh"})]}),e.jsx("p",{className:"text-xs text-white/60",children:"Clear cache & refresh"})]}),x&&e.jsxs(n.button,{onClick:H,whileHover:{scale:1.02},whileTap:{scale:.98},className:`p-3 rounded-lg border transition-all text-left ${d?"bg-green-500/20 border-green-500/30 text-green-400":"bg-white/5 border-white/10 text-white hover:bg-white/10"}`,children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx(D,{className:"w-4 h-4"}),e.jsx("span",{className:"font-medium",children:"Auto Refresh"})]}),e.jsx("p",{className:"text-xs text-white/60",children:d?`Every ${v(p)}`:"Disabled"})]})]}),e.jsx(F,{children:N&&e.jsxs(n.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"border-t border-white/10 pt-4",children:[e.jsxs("h4",{className:"text-white font-medium mb-3 flex items-center",children:[e.jsx(k,{className:"w-4 h-4 mr-2"}),"Refresh Settings"]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-white/80 text-sm mb-2",children:"Auto-refresh Interval"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"range",min:"10",max:"300",step:"10",value:g,onChange:r=>I(Number(r.target.value)),className:"flex-1 h-2 bg-white/20 rounded-lg appearance-none cursor-pointer"}),e.jsxs("span",{className:"text-white/70 text-sm w-12",children:[g,"s"]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-white/80 text-sm",children:"Cache Size"}),e.jsxs("p",{className:"text-white/60 text-xs",children:[t()," entries"]})]}),e.jsx(n.button,{onClick:s,whileHover:{scale:1.05},whileTap:{scale:.95},className:"px-3 py-1 bg-red-500/20 text-red-400 rounded-lg text-sm hover:bg-red-500/30 transition-all",children:"Clear Cache"})]})]})}),b&&e.jsxs("div",{className:"border-t border-white/10 pt-4 mt-4",children:[e.jsxs("h4",{className:"text-white font-medium mb-3 flex items-center",children:[e.jsx(L,{className:"w-4 h-4 mr-2"}),"Refresh Statistics"]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"flex items-center justify-center mb-1",children:e.jsx(U,{className:"w-4 h-4 text-blue-400"})}),e.jsx("p",{className:"text-lg font-bold text-white",children:l.totalRefreshes}),e.jsx("p",{className:"text-xs text-white/60",children:"Total"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"flex items-center justify-center mb-1",children:e.jsx(W,{className:"w-4 h-4 text-green-400"})}),e.jsx("p",{className:"text-lg font-bold text-white",children:l.successfulRefreshes}),e.jsx("p",{className:"text-xs text-white/60",children:"Success"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"flex items-center justify-center mb-1",children:e.jsx(J,{className:"w-4 h-4 text-red-400"})}),e.jsx("p",{className:"text-lg font-bold text-white",children:l.failedRefreshes}),e.jsx("p",{className:"text-xs text-white/60",children:"Failed"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"flex items-center justify-center mb-1",children:e.jsx(B,{className:"w-4 h-4 text-purple-400"})}),e.jsx("p",{className:"text-lg font-bold text-white",children:M(l.averageRefreshTime)}),e.jsx("p",{className:"text-xs text-white/60",children:"Avg Time"})]})]}),l.lastRefreshTime&&e.jsx("div",{className:"mt-3 text-center",children:e.jsxs("p",{className:"text-white/60 text-xs",children:["Last refresh: ",T(l.lastRefreshTime)]})}),!a&&j&&e.jsx("div",{className:"mt-3 text-center",children:e.jsxs("p",{className:"text-red-400 text-xs flex items-center justify-center",children:[e.jsx(S,{className:"w-3 h-3 mr-1"}),"Last online: ",T(j)]})})]})]})},A={theme:"dark",dashboard:{compactMode:!1,showAnimations:!0,defaultTab:"dashboard",chartsEnabled:!0},privacy:{showProfile:!0,showProgress:!0,showStats:!0}},ie=({userId:c,onClose:b})=>{const[x,f]=m.useState(A),[i,l]=m.useState(!1),[h,u]=m.useState("appearance");m.useEffect(()=>{const s=localStorage.getItem(`user-preferences-${c}`);if(s)try{const t=JSON.parse(s);f({...A,...t})}catch(t){console.error("Failed to parse preferences:",t)}},[c]);const o=(s,t,a)=>{f(j=>({...j,[s]:{...j[s],[t]:a}})),l(!0)},w=()=>{localStorage.setItem(`user-preferences-${c}`,JSON.stringify(x)),l(!1),console.log("Preferences saved:",x)},d=()=>{f(A),l(!0)},p=[{id:"appearance",label:"Appearance",icon:X},{id:"dashboard",label:"Dashboard",icon:k},{id:"privacy",label:"Privacy",icon:Y},{id:"data",label:"Data Refresh",icon:E}];return e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs(n.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"bg-gray-800 rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-hidden",children:[e.jsx("div",{className:"p-6 border-b border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:"User Preferences"}),e.jsx("p",{className:"text-white/60 mt-1",children:"Customize your dashboard experience"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[i&&e.jsxs(n.button,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},onClick:w,className:"flex items-center px-4 py-2 bg-primary-600 hover:bg-primary-700 text-white rounded-lg transition-colors",children:[e.jsx(G,{className:"w-4 h-4 mr-2"}),"Save Changes"]}),e.jsx("button",{onClick:b,className:"text-white/60 hover:text-white transition-colors",children:"✕"})]})]})}),e.jsxs("div",{className:"flex h-[600px]",children:[e.jsxs("div",{className:"w-64 bg-gray-900/50 border-r border-gray-700 p-4",children:[e.jsx("nav",{className:"space-y-2",children:p.map(s=>{const t=s.icon,a=h===s.id;return e.jsxs("button",{onClick:()=>u(s.id),className:`w-full flex items-center px-3 py-2 rounded-lg text-left transition-colors ${a?"bg-primary-600 text-white":"text-white/70 hover:text-white hover:bg-white/10"}`,children:[e.jsx(t,{className:"w-5 h-5 mr-3"}),s.label]},s.id)})}),e.jsx("div",{className:"mt-8 pt-4 border-t border-gray-700",children:e.jsxs("button",{onClick:d,className:"w-full flex items-center px-3 py-2 text-white/60 hover:text-white transition-colors",children:[e.jsx(q,{className:"w-4 h-4 mr-3"}),"Reset to Defaults"]})})]}),e.jsxs("div",{className:"flex-1 p-6 overflow-y-auto",children:[h==="appearance"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-white",children:"Appearance Settings"}),e.jsxs(R,{className:"p-4",children:[e.jsx("label",{className:"block text-white font-medium mb-3",children:"Theme"}),e.jsx("div",{className:"space-y-2",children:["dark","light","auto"].map(s=>e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"theme",value:s,checked:x.theme===s,onChange:t=>o("theme","theme",t.target.value),className:"mr-3"}),e.jsx("span",{className:"text-white/80 capitalize",children:s})]},s))})]})]}),h==="dashboard"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-white",children:"Dashboard Settings"}),e.jsx(R,{className:"p-4",children:e.jsx("div",{className:"space-y-4",children:Object.entries(x.dashboard).map(([s,t])=>s==="defaultTab"?e.jsxs("div",{children:[e.jsx("label",{className:"block text-white/80 mb-2",children:"Default Tab"}),e.jsxs("select",{value:t,onChange:a=>o("dashboard",s,a.target.value),className:"w-full bg-gray-700 text-white rounded px-3 py-2",children:[e.jsx("option",{value:"dashboard",children:"Dashboard"}),e.jsx("option",{value:"leaderboard",children:"Leaderboard"}),e.jsx("option",{value:"search",children:"Search"}),e.jsx("option",{value:"export",children:"Export"})]})]},s):e.jsxs("label",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-white/80 capitalize",children:s.replace(/([A-Z])/g," $1").trim()}),e.jsx("input",{type:"checkbox",checked:t,onChange:a=>o("dashboard",s,a.target.checked),className:"ml-3"})]},s))})})]}),h==="privacy"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-white",children:"Privacy Settings"}),e.jsx(R,{className:"p-4",children:e.jsx("div",{className:"space-y-4",children:Object.entries(x.privacy).map(([s,t])=>e.jsxs("label",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-white/80 capitalize",children:s.replace(/([A-Z])/g," $1").trim()}),e.jsx("input",{type:"checkbox",checked:t,onChange:a=>o("privacy",s,a.target.checked),className:"ml-3"})]},s))})})]}),h==="data"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-white",children:"Data Refresh Settings"}),e.jsxs("div",{className:"bg-white/5 rounded-lg p-4 border border-white/10",children:[e.jsx("p",{className:"text-white/70 text-sm mb-4",children:"Manage data refresh settings, cache, and synchronization options."}),e.jsx(Q,{showStats:!0,showAutoRefreshToggle:!0})]})]})]})]})]})})};export{ie as default};
