import{j as e,m as r}from"./animation-vendor-BWQ_wUI_.js";import{f as p,L as $,e as I,g,h as u}from"./index-ChD3UmY2.js";import{C as D}from"./Card-CpLpOsAi.js";import{B as v,A as w,j as y,u as N}from"./ui-vendor-B1oIOTiF.js";import{d as f,e as j}from"./apollo-vendor-8AJvV5pX.js";import"./react-vendor-DJG_os-6.js";const A=({piscineType:c,totalXP:s,projectStats:o})=>{const h=[{label:`Piscine ${c.toUpperCase()} XP`,value:p(s),icon:v,color:"primary"},{label:"Projects Passed",value:o.passed,icon:w,color:"green"},{label:"Projects Failed",value:o.failed,icon:y,color:"red"},{label:"Success Rate",value:`${o.passRate}%`,icon:N,color:"blue"}],m={primary:"text-primary-400",green:"text-green-400",red:"text-red-400",blue:"text-blue-400"},b={primary:"bg-primary-500/20",green:"bg-green-500/20",red:"bg-red-500/20",blue:"bg-blue-500/20"};return e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:h.map((i,n)=>e.jsx(r.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:n*.1},children:e.jsx(D,{className:"p-6 h-full bg-white/5",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-white/60 text-sm",children:i.label}),e.jsx("p",{className:`text-3xl font-bold ${m[i.color]}`,children:i.value})]}),e.jsx("div",{className:`w-12 h-12 ${b[i.color]} rounded-lg flex items-center justify-center`,children:e.jsx(i.icon,{className:`w-6 h-6 ${m[i.color]}`})})]})})},i.label))})},R=({user:c,piscineType:s})=>{const o=s==="go"?"/bahrain/bh-piscine/%":`/bahrain/bh-module/piscine-${s}/%`,{data:h,loading:m}=f(j`
    query GetPiscineXPTransactions($userId: Int!, $pathPattern: String!) {
      transaction(
        where: {
          userId: { _eq: $userId }
          type: { _eq: "xp" }
          path: { _like: $pathPattern }
        }
        order_by: { createdAt: desc }
      ) {
        id
        amount
        path
        createdAt
        object {
          name
          type
        }
      }
    }
  `,{variables:{userId:c.id,pathPattern:o},errorPolicy:"all"}),{data:b,loading:i}=f(j`
    query GetPiscineProgress($userId: Int!, $pathPattern: String!) {
      progress(
        where: {
          userId: { _eq: $userId }
          path: { _like: $pathPattern }
        }
        order_by: { createdAt: desc }
      ) {
        id
        grade
        isDone
        path
        version
        createdAt
        updatedAt
      }
    }
  `,{variables:{userId:c.id,pathPattern:o},errorPolicy:"all"});if(m||i)return e.jsx($,{});const n=h?.transaction||[],d=b?.progress||[],P=n.reduce((t,l)=>t+(l.amount||0),0),k=I(d);n.slice(0,10),d.filter(t=>t.isDone).length,d.length,d.filter(t=>t.grade).reduce((t,l)=>t+l.grade,0)/d.filter(t=>t.grade).length,d.slice(0,5);const x=n.filter(t=>s==="go"?t.path.includes("/bahrain/bh-piscine/"):t.path.includes(`/bahrain/bh-module/piscine-${s}/`)),a=d.filter(t=>s==="go"?t.path.includes("/bahrain/bh-piscine/"):t.path.includes(`/bahrain/bh-module/piscine-${s}/`));return e.jsxs("div",{className:"bg-gradient-to-br from-slate-900 via-emerald-900/20 to-slate-900 h-full w-full relative",children:[e.jsxs("div",{className:"fixed inset-0 opacity-30 pointer-events-none z-0",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-emerald-500/5 to-teal-500/5"}),e.jsx("div",{className:"absolute inset-0",style:{backgroundImage:"radial-gradient(circle at 35px 35px, rgba(52, 211, 153, 0.1) 2px, transparent 0)",backgroundSize:"70px 70px"}})]}),e.jsx("div",{className:"relative z-10 h-full w-full overflow-y-auto custom-scrollbar",children:e.jsxs("div",{className:"relative space-y-8 p-6",children:[e.jsxs(r.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.6},className:"text-center space-y-6",children:[e.jsxs(r.div,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:{type:"spring",stiffness:200,damping:15},className:"inline-flex items-center justify-center w-24 h-24 bg-gradient-to-r from-emerald-500/20 to-teal-500/20 rounded-full backdrop-blur-xl border border-emerald-400/30 mb-6 shadow-2xl shadow-emerald-500/20 relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-emerald-400/10 to-teal-400/10 animate-pulse"}),e.jsx(v,{className:"w-12 h-12 text-emerald-400 drop-shadow-lg relative z-10"})]}),e.jsxs(r.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3,duration:.6},children:[e.jsxs("h1",{className:"text-5xl font-bold bg-gradient-to-r from-white via-emerald-100 to-teal-100 bg-clip-text text-transparent mb-4",children:["Piscine ",s.toUpperCase()]}),e.jsxs("p",{className:"text-xl text-white/70 max-w-2xl mx-auto",children:["Your intensive ",e.jsx("span",{className:"text-emerald-400 font-semibold",children:"coding bootcamp"})," journey and progress"]})]})]}),e.jsx(r.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1},children:e.jsx(A,{piscineType:s,totalXP:P,projectStats:k})}),e.jsxs(r.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-white/5 to-white/2 backdrop-blur-xl rounded-2xl p-6 border border-white/10 hover:bg-white/10 hover:border-emerald-400/30 transition-all duration-300 shadow-xl hover:shadow-2xl hover:shadow-emerald-500/10",children:[e.jsxs("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-emerald-500/30 to-teal-500/30 rounded-xl flex items-center justify-center mr-3 backdrop-blur-sm border border-emerald-400/20",children:e.jsx(N,{className:"w-4 h-4 text-emerald-400"})}),e.jsx("span",{className:"bg-gradient-to-r from-white to-emerald-100 bg-clip-text text-transparent",children:"Recent XP Gains"})]}),e.jsxs("div",{className:"space-y-3",children:[x.slice(0,5).map((t,l)=>e.jsxs(r.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:l*.1},className:"flex items-center justify-between p-3 bg-gradient-to-r from-emerald-500/5 to-teal-500/5 rounded-xl border border-emerald-400/10 hover:border-emerald-400/30 transition-all duration-300 backdrop-blur-sm",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-gradient-to-r from-emerald-400 to-teal-400 shadow-lg shadow-emerald-400/30"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium text-sm",children:t.object?.name||t.path.split("/").pop()||"Project"}),e.jsx("p",{className:"text-white/60 text-xs",children:g(t.createdAt)})]})]}),e.jsx("div",{className:"text-right",children:e.jsxs("p",{className:"text-emerald-400 font-bold text-sm drop-shadow-sm",children:["+",p(t.amount)]})})]},t.id)),x.length===0&&e.jsx("div",{className:"text-center text-white/60 py-4",children:e.jsx("p",{className:"text-sm",children:"No XP gains found for this piscine"})})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-white/5 to-white/2 backdrop-blur-xl rounded-2xl p-6 border border-white/10 hover:bg-white/10 hover:border-teal-400/30 transition-all duration-300 shadow-xl hover:shadow-2xl hover:shadow-teal-500/10",children:[e.jsxs("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-teal-500/30 to-cyan-500/30 rounded-xl flex items-center justify-center mr-3 backdrop-blur-sm border border-teal-400/20",children:e.jsx(y,{className:"w-4 h-4 text-teal-400"})}),e.jsx("span",{className:"bg-gradient-to-r from-white to-teal-100 bg-clip-text text-transparent",children:"Recent Progress"})]}),e.jsxs("div",{className:"space-y-3",children:[a.slice(0,5).map((t,l)=>e.jsxs(r.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:l*.1},className:"flex items-center justify-between p-3 bg-gradient-to-r from-teal-500/5 to-cyan-500/5 rounded-xl border border-teal-400/10 hover:border-teal-400/30 transition-all duration-300 backdrop-blur-sm",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`w-3 h-3 rounded-full shadow-lg ${t.isDone?"bg-gradient-to-r from-emerald-400 to-green-400 shadow-emerald-400/30":"bg-gradient-to-r from-yellow-400 to-orange-400 shadow-yellow-400/30"}`}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium text-sm",children:t.path.split("/").pop()||"Project"}),e.jsx("p",{className:"text-white/60 text-xs",children:g(t.updatedAt)})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:`px-3 py-1.5 text-xs rounded-full font-semibold backdrop-blur-sm border ${t.isDone?"bg-emerald-500/20 text-emerald-300 border-emerald-400/30":"bg-yellow-500/20 text-yellow-300 border-yellow-400/30"}`,children:t.isDone?"Completed":"In Progress"}),t.grade&&e.jsxs("p",{className:"text-white/60 text-xs mt-1",children:["Grade: ",u(t.grade)]})]})]},t.id)),a.length===0&&e.jsx("div",{className:"text-center text-white/60 py-4",children:e.jsx("p",{className:"text-sm",children:"No progress found for this piscine"})})]})]})]}),e.jsxs(r.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.3},className:"bg-gradient-to-br from-white/5 to-white/2 backdrop-blur-xl rounded-2xl p-6 border border-white/10 hover:bg-white/10 hover:border-emerald-400/30 transition-all duration-300 shadow-xl hover:shadow-2xl hover:shadow-emerald-500/10",children:[e.jsxs("h3",{className:"text-lg font-semibold text-white mb-6 flex items-center",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-emerald-500/30 to-teal-500/30 rounded-xl flex items-center justify-center mr-3 backdrop-blur-sm border border-emerald-400/20",children:e.jsx(w,{className:"w-4 h-4 text-emerald-400"})}),e.jsxs("span",{className:"bg-gradient-to-r from-white to-emerald-100 bg-clip-text text-transparent",children:["Piscine ",s.toUpperCase()," Progress Overview"]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[e.jsxs(r.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.1},className:"bg-gradient-to-br from-emerald-500/10 to-teal-500/10 rounded-xl p-4 text-center border border-emerald-400/20 backdrop-blur-sm hover:bg-emerald-500/15 hover:border-emerald-400/40 transition-all duration-300",children:[e.jsx("p",{className:"text-3xl font-bold bg-gradient-to-r from-white to-emerald-100 bg-clip-text text-transparent",children:a.length}),e.jsx("p",{className:"text-white/70 text-sm font-medium mt-1",children:"Total Projects"})]}),e.jsxs(r.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.2},className:"bg-gradient-to-br from-teal-500/10 to-cyan-500/10 rounded-xl p-4 text-center border border-teal-400/20 backdrop-blur-sm hover:bg-teal-500/15 hover:border-teal-400/40 transition-all duration-300",children:[e.jsx("p",{className:"text-3xl font-bold text-teal-400 drop-shadow-sm",children:a.filter(t=>t.isDone).length}),e.jsx("p",{className:"text-white/70 text-sm font-medium mt-1",children:"Completed"})]}),e.jsxs(r.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.3},className:"bg-gradient-to-br from-cyan-500/10 to-blue-500/10 rounded-xl p-4 text-center border border-cyan-400/20 backdrop-blur-sm hover:bg-cyan-500/15 hover:border-cyan-400/40 transition-all duration-300",children:[e.jsx("p",{className:"text-3xl font-bold text-cyan-400 drop-shadow-sm",children:p(x.reduce((t,l)=>t+l.amount,0))}),e.jsx("p",{className:"text-white/70 text-sm font-medium mt-1",children:"Total XP"})]}),e.jsxs(r.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.4},className:"bg-gradient-to-br from-green-500/10 to-emerald-500/10 rounded-xl p-4 text-center border border-green-400/20 backdrop-blur-sm hover:bg-green-500/15 hover:border-green-400/40 transition-all duration-300",children:[e.jsx("p",{className:"text-3xl font-bold text-green-400 drop-shadow-sm",children:a.filter(t=>t.grade).length>0?u(a.filter(t=>t.grade).reduce((t,l)=>t+l.grade,0)/a.filter(t=>t.grade).length):"0%"}),e.jsx("p",{className:"text-white/70 text-sm font-medium mt-1",children:"Avg Grade"})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex justify-between text-sm text-white/70 mb-3",children:[e.jsx("span",{className:"font-medium",children:"Completion Progress"}),e.jsxs("span",{className:"font-bold text-emerald-400",children:[a.length>0?(a.filter(t=>t.isDone).length/a.length*100).toFixed(1):0,"%"]})]}),e.jsx("div",{className:"w-full bg-gradient-to-r from-slate-800/50 to-slate-700/50 rounded-full h-4 border border-white/10 shadow-inner",children:e.jsx(r.div,{className:"bg-gradient-to-r from-emerald-500 to-teal-500 h-4 rounded-full shadow-lg shadow-emerald-500/30 relative overflow-hidden",initial:{width:0},animate:{width:`${a.length>0?a.filter(t=>t.isDone).length/a.length*100:0}%`},transition:{duration:1.5,ease:"easeOut"},children:e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white/20 to-transparent animate-pulse"})})})]}),e.jsx("div",{className:"text-center",children:e.jsxs("div",{className:"inline-flex items-center space-x-4 bg-gradient-to-r from-emerald-500/10 to-teal-500/10 rounded-xl px-6 py-3 border border-emerald-400/20 backdrop-blur-sm",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-emerald-400"}),e.jsxs("span",{className:"text-white/70 text-sm font-medium",children:[x.length," XP transactions"]})]}),e.jsx("div",{className:"w-px h-4 bg-white/20"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-teal-400"}),e.jsxs("span",{className:"text-white/70 text-sm font-medium",children:[a.length," projects tracked"]})]})]})})]})]})})]})};export{R as default};
