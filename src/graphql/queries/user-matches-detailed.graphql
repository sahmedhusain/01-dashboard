# Import required fragments
#import "../fragments/user-fragments.graphql"
#import "../fragments/match-fragments.graphql"
#import "../fragments/object-fragments.graphql"
#import "../fragments/event-fragments.graphql"

# Query for user matches (betting/competition system)
query GetUserMatchesDetailed($userId: Int!, $limit: Int = 50, $offset: Int = 0) {
  user(where: { id: { _eq: $userId } }) {
    id
    login

    # User matches
    matches(
      limit: $limit
      offset: $offset
      order_by: { createdAt: desc }
    ) {
      ...MatchInfo
      # The matched user
      matchedUser: userByMatchId {
        ...UserBasicInfo
      }
      # Related object
      object {
        ...ObjectInfo
        author {
          ...UserBasicInfo
        }
      }
      # Related event
      event {
        ...EventInfo
        object {
          ...ObjectInfo
        }
      }
    }

    # Matches aggregate
    matches_aggregate {
      ...MatchAggregateInfo
    }
  }
}
