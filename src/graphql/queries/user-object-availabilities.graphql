# Import required fragments
#import "../fragments/user-fragments.graphql"
#import "../fragments/object-fragments.graphql"

# Query for user object availabilities
query GetUserObjectAvailabilities($userId: Int!, $limit: Int = 50, $offset: Int = 0) {
  user(where: { id: { _eq: $userId } }) {
    id
    login

    # Object availabilities
    objectAvailabilities(
      limit: $limit
      offset: $offset
      order_by: { createdAt: desc }
    ) {
      ...ObjectAvailabilityInfo
      object {
        ...ObjectInfo
        author {
          ...UserBasicInfo
        }
        reference {
          ...ObjectInfo
        }
      }
    }

    # Object availabilities aggregate
    objectAvailabilities_aggregate {
      ...ObjectAvailabilityAggregateInfo
    }
  }
}
