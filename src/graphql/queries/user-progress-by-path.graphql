# Import required fragments
#import "../fragments/progress-fragments.graphql"

# Query for user progress by path
query GetUserProgressByPath($userId: Int!, $pathPattern: String = "%", $limit: Int = 50, $offset: Int = 0) {
  user(where: { id: { _eq: $userId } }) {
    id
    login

    # Progress by path
    progressesByPath(
      where: { path: { _like: $pathPattern } }
      limit: $limit
      offset: $offset
      order_by: { updatedAt: desc }
    ) {
      ...ProgressByPathViewInfo
    }

    # Progress by path aggregate
    progressesByPath_aggregate(
      where: { path: { _like: $pathPattern } }
    ) {
      ...ProgressByPathViewAggregateInfo
    }
  }
}
